<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>悠哉的博客</title>

<!-- SEO meta tags -->
  <meta name="description" content="悠哉的博客，分享生活、旅行、技术与兴趣的个人博客。">
  <meta name="keywords" content="博客, 生活, 技术, 旅行, 悠哉,youzai,fuchenyouzai,拂尘悠哉">

<!-- PWA Manifest -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#4CAF50">

<!-- iOS 安装支持 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="悠哉的博客">
<link rel="apple-touch-icon" href="/icon-192.png">

<!-- 设置 iOS 状态栏样式 -->
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
/* ===== 颜色变量 & 白天/夜晚模式 ===== */
:root {
  --bg-color: #f4f4f4;
  --text-color: #333;
  --header-bg: #4CAF50;
  --footer-bg: #333;
  --footer-text: #fff;
  --article-bg: #fff;
}
body.dark-mode {
  --bg-color: #1e1e1e;
  --text-color: #f4f4f4;
  --header-bg: #333;
  --footer-bg: #222;
  --footer-text: #f4f4f4;
  --article-bg: #2a2a2a;
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  font-family: "Helvetica Neue", Arial, sans-serif;
  margin: 0;
  padding: 0;
}

header {
  background-color: var(--header-bg);
  color: white;
  padding: 20px 10px;
  text-align: center;
}

main {
  max-width: 800px;
  margin: 20px auto;
  padding: 0 10px;
}

article {
  background: var(--article-bg);
  color: var(--text-color);
  margin-bottom: 20px;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

h2 { color: #4CAF50; }
img { max-width: 100%; border-radius: 5px; cursor: pointer; transition: transform 0.3s; }
iframe { width: 100%; border: none; border-radius: 5px; }
audio { width: 100%; margin-top: 10px; }

footer {
  text-align: center;
  padding: 15px;
  background: var(--footer-bg);
  color: var(--footer-text);
  margin-top: 20px;
}

.gallery {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}
.gallery img {
  width: 48%; /* 横向展示，两张图片并排 */
  border-radius: 5px;
  cursor: pointer;
  transition: transform 0.3s;
}
.gallery img:hover {
  transform: scale(1.05);
}

a.telegram-btn, a.admin-btn {
  display: inline-block;
  padding: 10px 15px;
  color: white;
  border-radius: 5px;
  text-decoration: none;
  font-weight: bold;
}
a.telegram-btn { background-color: #0088cc; }
a.telegram-btn:hover { background-color: #006699; }
a.admin-btn { background-color: #e53935; }
a.admin-btn:hover { background-color: #b71c1c; }

.video-container, .article-video {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%;
  height: 0;
  overflow: hidden;
  border-radius: 5px;
  margin: 10px 0;
}
.video-container iframe, .article-video iframe, .video-container #live-player {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
}

/* ===== 右上角安装按钮（圆形） ===== */
#install-btn {
  position: fixed;
  top: 160px;
  right: 20px;
  z-index: 999;
  width: 80px;
  height: 80px;
  background-color: #4CAF50;
  color: white;
  border-radius: 50%;
  font-size: 14px;
  font-weight: bold;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: background-color 0.3s, transform 0.2s;
}
#install-btn:hover {
  background-color: #388E3C;
  transform: scale(1.05);
}
@media screen and (max-width: 768px) {
  #install-btn {
    top: 100px;
    width: 70px;
    height: 70px;
    font-size: 13px;
  }
}

/* ===== 右下角悬浮按钮（声音 & 模式） ===== */
#sound-toggle-btn, #mode-toggle-btn {
  position: fixed;
  bottom: 20px;
  z-index: 1000;
  padding: 12px 18px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: background-color 0.3s, transform 0.2s;
}
#sound-toggle-btn {
  right: 20px;
  background-color: #e53935;
  color: white;
}
#sound-toggle-btn:hover { background-color: #b71c1c; transform: scale(1.05); }

#mode-toggle-btn {
  right: 140px;
  background-color: #555;
  color: white;
  font-size: 14px;
}
#mode-toggle-btn:hover { background-color: #333; transform: scale(1.05); }
</style>
</head>
<body>
<header>
<h1>悠哉的博客</h1>
<p>分享我的生活与兴趣</p>
</header>

<main>
<article>
<h2>悠哉的Telegram</h2>
<a href="https://t.me/fuchenyouzaibot" target="_blank" class="telegram-btn">联系 Telegram</a>
</article>	

<!-- 全球时间模块（毫秒级同步+自动适配时区） -->
<article>
<h2>全球时间（毫秒级同步）</h2>
<div class="horizontal-module">
  <div class="module-item">
    <p style="font-weight: 600;">UTC 世界时</p>
    <p id="utc-time">00:00:00.000</p>
  </div>
  <div class="module-item">
    <p style="font-weight: 600;">北京（UTC+8）</p>
    <p id="beijing-time">00:00:00.000</p>
  </div>
  <div class="module-item">
    <p style="font-weight: 600;">伦敦（自动夏令时）</p>
    <p id="london-time">00:00:00.000</p>
  </div>
  <div class="module-item">
    <p style="font-weight: 600;">纽约（自动夏令时）</p>
    <p id="newyork-time">00:00:00.000</p>
  </div>
</div>
<p style="font-size: 12px; color: #666; margin-top: 8px; text-align: center;">
  时间更新频率：1毫秒/次 | 时区自动适配（含夏令时）
</p>
</article>

<!-- 时间模块CSS（无需额外依赖，独立完整） -->
<style>
.horizontal-module {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  align-items: center;
  margin-top: 15px;
  padding: 15px;
  background: #f9f9f9;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  width: 100%;
  box-sizing: border-box;
}
.horizontal-module .module-item {
  flex: 1;
  min-width: 120px;
  text-align: center;
}
#utc-time, #beijing-time, #london-time, #newyork-time {
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0.5px;
  color: #2c3e50;
}
article {
  background: #fff;
  margin: 0 auto 20px;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  max-width: 1200px;
  width: 100%;
  box-sizing: border-box;
}
h2 { 
  color: #4CAF50; 
  margin-top: 0; 
  border-bottom: 1px solid #eee;
  padding-bottom: 8px;
}
</style>

<!-- 时间模块JS（自动适配夏令时，无需手动维护时区） -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 格式化时间（带毫秒+自动时区）
  const formatTimeWithMs = (date, timezone) => {
    const timeStr = date.toLocaleTimeString('zh-CN', {
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      fractionalSecondDigits: 3,
      hour12: false,
      timeZone: timezone
    });
    // 替换逗号为小数点（统一毫秒格式）
    return timeStr.replace(',', '.');
  };

  // 实时更新时间
  const updateGlobalTime = () => {
    const now = new Date();
    // 各时区时间同步（自动适配夏令时）
    document.getElementById('utc-time').textContent = formatTimeWithMs(now, 'UTC');
    document.getElementById('beijing-time').textContent = formatTimeWithMs(now, 'Asia/Shanghai');
    document.getElementById('london-time').textContent = formatTimeWithMs(now, 'Europe/London');
    document.getElementById('newyork-time').textContent = formatTimeWithMs(now, 'America/New_York');
  };

  // 初始化+毫秒级更新
  updateGlobalTime();
  setInterval(updateGlobalTime, 1);
});
</script>





<article>
<h2>本地天气 & 智能日历</h2>
<div class="horizontal-module">
  <!-- 天气模块：默认大连+完整信息 -->
  <div class="module-item" style="min-width: 260px;">
    <p style="font-weight: 600;">本地天气</p>
    <p id="weather-city" style="font-size: 14px; color: #666; margin: 4px 0;">加载中...</p>
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin: 8px 0;">
      <span id="weather-icon" style="font-size: 24px;">🌤️</span>
      <p id="local-weather" style="font-size: 16px; margin: 0; font-weight: 600; color: #2c3e50;">加载中...</p>
    </div>
    <p id="weather-extra" style="font-size: 13px; color: #444; margin: 5px 0;">
      体感: 加载中 | 气压: 加载中
    </p>
    <p id="weather-details" style="font-size: 12px; color: #666; line-height: 1.4;">
      日照: 加载中<br>湿度: 加载中 | 风力: 加载中<br>紫外线: 加载中
    </p>
  </div>
  <!-- 日历模块 -->
  <div class="module-item">
    <p style="font-weight: 600;">公历</p>
    <p id="solar-date" style="font-size: 15px; margin: 8px 0;">2025年09月23日</p>
    <p id="current-weekday" style="font-size: 13px; color: #666;">星期二</p>
  </div>
  <div class="module-item">
    <p style="font-weight: 600;">农历</p>
    <p id="lunar-date" style="font-size: 15px; margin: 8px 0;">乙巳年八月初二</p>
    <p id="lunar-term" style="font-size: 13px; color: #e74c3c;">秋分（9月22日）</p>
  </div>
  <div class="module-item">
    <p style="font-weight: 600;">当前生肖</p>
    <p id="current-zodiac" style="font-size: 18px; margin: 8px 0;">蛇</p>
    <p style="font-weight: 600; margin-top: 15px;">距离下次节气</p>
    <p id="term-countdown" style="font-size: 13px; color: #666;">寒露（约29天后）</p>
  </div>
</div>
</article>

<style>
.horizontal-module {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  align-items: flex-start;
  margin-top: 15px;
  padding: 15px;
  background: #f9f9f9;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  width: 100%;
  box-sizing: border-box;
}
.horizontal-module .module-item {
  flex: 1;
  min-width: 150px;
  text-align: center;
  padding: 5px 0;
}
article {
  background: #fff;
  margin: 0 auto 20px;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  max-width: 1200px;
  width: 100%;
  box-sizing: border-box;
}
h2 { 
  color: #4CAF50; 
  margin-top: 0; 
  border-bottom: 1px solid #eee;
  padding-bottom: 8px;
}
#weather-icon {
  vertical-align: middle;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // 天气模块：默认地区为大连市
  const loadWeather = () => {
    // 大连专属备用天气数据（贴合海滨城市特点）
    const fallbackWeather = {
      city: "大连市",
      temp: 21,
      desc: "多云",
      icon: "🌤️",
      feelsLike: 20,
      pressure: 1015,
      humidity: 65,
      wind: "3m/s 西北风",
      sunrise: "05:58",
      sunset: "18:22",
      uv: "中"
    };

    // 优先IP定位，失败则强制显示大连天气
    fetch('https://restapi.amap.com/v3/ip?key=45f290423292a084c04a0a3622e5a74e')
      .then(res => res.json())
      .then(ipData => {
        const city = ipData.city || fallbackWeather.city; // 定位失效时锁定大连
        document.getElementById('weather-city').textContent = `当前地区：${city}`;
        
        // 获取对应城市天气数据
        fetch(`https://restapi.amap.com/v3/weather/weatherInfo?key=45f290423292a084c04a0a3622e5a74e&city=${encodeURIComponent(city)}&extensions=all`)
          .then(weatherRes => weatherRes.json())
          .then(weatherData => {
            if (weatherData.status === "1" && weatherData.lives.length > 0) {
              const live = weatherData.lives[0];
              // 天气图标映射（覆盖常见天气类型）
              const weatherIconMap = {
                "晴": "☀️", "多云": "🌤️", "阴": "☁️", "阵雨": "🌦️", "雷阵雨": "⛈️",
                "小雨": "🌧️", "中雨": "🌧️", "大雨": "🌧️", "暴雨": "⛈️", "雪": "❄️",
                "雾": "🌫️", "霾": "😷", "大风": "💨"
              };
              const icon = weatherIconMap[live.weather] || "🌤️";

              // 填充实时天气信息
              document.getElementById('weather-icon').textContent = icon;
              document.getElementById('local-weather').textContent = `${live.temperature}°C | ${live.weather}`;
              document.getElementById('weather-extra').textContent = `体感: ${live.feels_like}°C | 气压: ${live.pressure}hPa`;
              document.getElementById('weather-details').innerHTML = 
                `日照: ${live.sunrise} - ${live.sunset}<br>
                 湿度: ${live.humidity}% | 风力: ${live.windpower}级 ${live.winddirection}<br>
                 紫外线: ${live.uvindex || "中"}`;
            } else {
              // 接口返回异常，启用大连备用数据
              fillFallbackWeather();
            }
          })
          .catch(() => fillFallbackWeather()); // 请求失败时加载备用数据
      })
      .catch(() => fillFallbackWeather()); // 定位失败时强制显示大连天气

    // 填充大连备用天气数据的函数
    function fillFallbackWeather() {
      document.getElementById('weather-city').textContent = `当前地区：${fallbackWeather.city}`;
      document.getElementById('weather-icon').textContent = fallbackWeather.icon;
      document.getElementById('local-weather').textContent = `${fallbackWeather.temp}°C | ${fallbackWeather.desc}`;
      document.getElementById('weather-extra').textContent = `体感: ${fallbackWeather.feelsLike}°C | 气压: ${fallbackWeather.pressure}hPa`;
      document.getElementById('weather-details').innerHTML = 
        `日照: ${fallbackWeather.sunrise} - ${fallbackWeather.sunset}<br>
         湿度: ${fallbackWeather.humidity}% | 风力: ${fallbackWeather.wind}<br>
         紫外线: ${fallbackWeather.uv}`;
    }
  };

  // 日历模块：保持数据准确
  const initCalendar = () => {
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth() + 1;
    const day = today.getDate();
    // 公历日期
    document.getElementById('solar-date').textContent = `${year}年${String(month).padStart(2, '0')}月${String(day).padStart(2, '0')}日`;
    // 星期
    const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
    document.getElementById('current-weekday').textContent = weekdays[today.getDay()];
    // 农历（2025年固定数据）
    document.getElementById('lunar-date').textContent = "乙巳年八月初二";
    // 节气
    document.getElementById('lunar-term').textContent = "秋分（9月22日）";
    // 生肖
    document.getElementById('current-zodiac').textContent = "蛇";
    // 下次节气倒计时（寒露：2025年10月8日）
    const nextTermDate = new Date(2025, 9, 8);
    const diffDays = Math.ceil((nextTermDate - today) / (1000 * 60 * 60 * 24));
    document.getElementById('term-countdown').textContent = `寒露（约${diffDays}天后）`;
  };

  // 初始化加载+定时更新
  loadWeather();
  initCalendar();
  setInterval(loadWeather, 3600000); // 每小时更新一次天气
  setInterval(initCalendar, 86400000); // 每天更新一次日历
});
</script>

<div style="width: 100%; max-width: 800px; margin: 20px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
  <div style="padding: 15px; background: #f5f5f5;">
    <label style="display: block; margin-bottom: 8px; font-weight: bold;">粘贴抖音直播间链接：</label>
    <input type="text" id="douyinLiveInput" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;" placeholder="例如：https://v.douyin.com/xxxx/">
    <button onclick="loadLive()" style="margin-top: 10px; padding: 8px 15px; background: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer;">加载直播</button>
  </div>
  <div id="liveLoading" style="text-align: center; padding: 30px; background: #f8f9fa; display: none;">正在加载直播...</div>
  <iframe id="douyinLiveIframe" style="width: 100%; height: 500px; border: none; display: none;" allowfullscreen></iframe>
</div>

<script>
  function loadLive() {
    const input = document.getElementById("douyinLiveInput");
    const iframe = document.getElementById("douyinLiveIframe");
    const loading = document.getElementById("liveLoading");
    
    if (!input.value) {
      alert("请先粘贴抖音直播间链接");
      return;
    }
    
    loading.style.display = "block";
    iframe.style.display = "none";
    
    // 直接将输入的链接设置为iframe的src
    iframe.src = input.value;
    // 延迟显示，确保加载
    setTimeout(() => {
      loading.style.display = "none";
      iframe.style.display = "block";
    }, 1000);
  }
</script>

<!-- 模块开头：GitHub博客专用人民币实时汇率查询与转换工具 -->
<div style="width: 100%; max-width: 800px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 标题区域 -->
  <h3 style="margin: 0 0 20px; font-size: 18px; color: #333; border-bottom: 1px solid #f5f5f5; padding-bottom: 10px;">
    人民币实时汇率查询与转换
  </h3>

  <!-- 汇率显示区域 -->
  <div style="margin-bottom: 25px;">
    <h4 style="margin: 0 0 12px; font-size: 14px; color: #666;">当前汇率（1人民币可兑换）</h4>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
      <!-- 美元汇率卡片 -->
      <div style="padding: 15px; border-radius: 8px; background: #f8f9fa; text-align: center;">
        <div style="font-size: 12px; color: #999; margin-bottom: 5px;">美元 (USD)</div>
        <div id="cny-to-usd" style="font-size: 20px; font-weight: 500; color: #333;">--</div>
        <div id="usd-to-cny" style="font-size: 12px; color: #666; margin-top: 3px;">1 USD ≈ -- CNY</div>
      </div>
      <!-- 日元汇率卡片 -->
      <div style="padding: 15px; border-radius: 8px; background: #f8f9fa; text-align: center;">
        <div style="font-size: 12px; color: #999; margin-bottom: 5px;">日元 (JPY)</div>
        <div id="cny-to-jpy" style="font-size: 20px; font-weight: 500; color: #333;">--</div>
        <div id="jpy-to-cny" style="font-size: 12px; color: #666; margin-top: 3px;">100 JPY ≈ -- CNY</div>
      </div>
      <!-- 港元汇率卡片 -->
      <div style="padding: 15px; border-radius: 8px; background: #f8f9fa; text-align: center;">
        <div style="font-size: 12px; color: #999; margin-bottom: 5px;">港元 (HKD)</div>
        <div id="cny-to-hkd" style="font-size: 20px; font-weight: 500; color: #333;">--</div>
        <div id="hkd-to-cny" style="font-size: 12px; color: #666; margin-top: 3px;">1 HKD ≈ -- CNY</div>
      </div>
    </div>
    <div id="rate-update-time" style="margin-top: 10px; font-size: 12px; color: #999; text-align: right;">
      汇率更新时间：--
    </div>
  </div>

  <!-- 汇率转换区域 -->
  <div>
    <h4 style="margin: 0 0 12px; font-size: 14px; color: #666;">货币转换</h4>
    <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
      <!-- 输入金额 -->
      <div style="flex: 1; min-width: 150px;">
        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 5px;">输入金额</label>
        <input 
          id="convert-amount" 
          type="number" 
          min="0" 
          step="0.01" 
          value="1" 
          style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;"
        >
      </div>
      <!-- 源货币选择 -->
      <div style="min-width: 120px;">
        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 5px;">源货币</label>
        <select id="source-currency" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #fff;">
          <option value="CNY">人民币 (CNY)</option>
          <option value="USD">美元 (USD)</option>
          <option value="JPY">日元 (JPY)</option>
          <option value="HKD">港元 (HKD)</option>
        </select>
      </div>
      <!-- 目标货币选择 -->
      <div style="min-width: 120px;">
        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 5px;">目标货币</label>
        <select id="target-currency" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #fff;">
          <option value="USD">美元 (USD)</option>
          <option value="JPY">日元 (JPY)</option>
          <option value="HKD">港元 (HKD)</option>
          <option value="CNY">人民币 (CNY)</option>
        </select>
      </div>
      <!-- 转换按钮 -->
      <div style="min-width: 100px; align-self: flex-end; margin-bottom: 24px;">
        <button id="convert-btn" style="width: 100%; padding: 10px; background: #2c3e50; color: #fff; border: none; border-radius: 4px; cursor: pointer; transition: background 0.3s;">
          立即转换
        </button>
      </div>
    </div>
    <!-- 转换结果 -->
    <div id="convert-result" style="margin-top: 15px; padding: 15px; border-radius: 8px; background: #f8f9fa; text-align: center; font-size: 16px; color: #333; display: none;">
      <span id="result-content">1 CNY ≈ 0.14 USD</span>
    </div>
  </div>
</div>

<script>
  // 存储汇率数据（CNY为基础，1 CNY = ? 其他货币）
  let exchangeRates = {};
  // 公开汇率API（无需密钥，适合前端调用）
  const RATE_API_URL = "https://open.er-api.com/v6/latest/CNY";

  // 1. 获取并更新实时汇率
  async function fetchAndUpdateRates() {
    const usdDom = document.getElementById("cny-to-usd");
    const jpyDom = document.getElementById("cny-to-jpy");
    const hkdDom = document.getElementById("cny-to-hkd");
    const usdReverseDom = document.getElementById("usd-to-cny");
    const jpyReverseDom = document.getElementById("jpy-to-cny");
    const hkdReverseDom = document.getElementById("hkd-to-cny");
    const timeDom = document.getElementById("rate-update-time");

    try {
      const response = await fetch(RATE_API_URL);
      const data = await response.json();
      
      if (data.result === "success") {
        // 存储汇率（保留4位小数）
        exchangeRates = {
          USD: parseFloat(data.rates.USD.toFixed(4)),
          JPY: parseFloat(data.rates.JPY.toFixed(4)),
          HKD: parseFloat(data.rates.HKD.toFixed(4)),
          CNY: 1 // 1 CNY = 1 CNY
        };

        // 更新汇率显示（1 CNY 可兑换的其他货币）
        usdDom.textContent = exchangeRates.USD;
        jpyDom.textContent = exchangeRates.JPY;
        hkdDom.textContent = exchangeRates.HKD;

        // 更新反向汇率（1其他货币 可兑换的CNY，保留4位小数）
        usdReverseDom.textContent = `1 USD ≈ ${(1 / exchangeRates.USD).toFixed(4)} CNY`;
        jpyReverseDom.textContent = `100 JPY ≈ ${(100 / exchangeRates.JPY).toFixed(4)} CNY`;
        hkdReverseDom.textContent = `1 HKD ≈ ${(1 / exchangeRates.HKD).toFixed(4)} CNY`;

        // 更新时间（格式：YYYY-MM-DD HH:MM）
        const updateTime = new Date(data.time_last_update_unix * 1000);
        const formattedTime = `${updateTime.getFullYear()}-${(updateTime.getMonth() + 1).toString().padStart(2, "0")}-${updateTime.getDate().toString().padStart(2, "0")} ${updateTime.getHours().toString().padStart(2, "0")}:${updateTime.getMinutes().toString().padStart(2, "0")}`;
        timeDom.textContent = `汇率更新时间：${formattedTime}`;
      } else {
        throw new Error("获取汇率失败，API返回错误");
      }
    } catch (err) {
      console.error("汇率获取错误：", err);
      usdDom.textContent = "获取失败";
      jpyDom.textContent = "获取失败";
      hkdDom.textContent = "获取失败";
      timeDom.textContent = "汇率更新时间：获取失败";
    }
  }

  // 2. 执行货币转换
  function handleCurrencyConvert() {
    const amountInput = document.getElementById("convert-amount");
    const sourceCurrency = document.getElementById("source-currency").value;
    const targetCurrency = document.getElementById("target-currency").value;
    const resultDom = document.getElementById("convert-result");
    const resultContentDom = document.getElementById("result-content");

    // 输入校验
    const amount = parseFloat(amountInput.value);
    if (isNaN(amount) || amount < 0) {
      alert("请输入有效的非负金额");
      return;
    }
    if (!exchangeRates[sourceCurrency] || !exchangeRates[targetCurrency]) {
      alert("汇率数据未加载完成，请稍后再试");
      return;
    }

    // 计算转换结果（保留4位小数）
    // 逻辑：金额 * (1 CNY兑目标货币汇率) / (1 CNY兑源货币汇率)
    const convertedAmount = (amount * exchangeRates[targetCurrency] / exchangeRates[sourceCurrency]).toFixed(4);
    // 显示结果
    resultContentDom.textContent = `${amount} ${sourceCurrency} ≈ ${convertedAmount} ${targetCurrency}`;
    resultDom.style.display = "block";
  }

  // 3. 初始化与事件绑定
  window.addEventListener("DOMContentLoaded", () => {
    // 初始加载汇率
    fetchAndUpdateRates();
    // 每30分钟刷新一次汇率（避免频繁请求API）
    setInterval(fetchAndUpdateRates, 30 * 60 * 1000);

    // 绑定转换按钮点击事件
    document.getElementById("convert-btn").addEventListener("click", handleCurrencyConvert);
    // 绑定回车键触发转换
    document.getElementById("convert-amount").addEventListener("keydown", (e) => {
      if (e.key === "Enter") handleCurrencyConvert();
    });
  });
</script>
<!-- 模块结尾：GitHub博客专用人民币实时汇率查询与转换工具 -->






<!-- 模块开头：GitHub博客专用抖音直播播放器 -->
<div style="width: 100%; max-width: 900px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- 抖音直播配置区（直接修改下方ID/链接即可） -->
  <script>
    // 👇 核心配置：填写抖音直播间ID或完整链接（二选一，链接优先）
    const douyinLiveConfig = {
      liveRoomId: "cctv6media", // 抖音账号ID（示例：cctv6media，需确保账号正在直播）
      liveRoomUrl: "" // 抖音直播间完整链接（示例：https://v.douyin.com/xxxx/，若填了链接则此参数无效）
    };

    // 自动生成有效直播链接
    function getValidDouyinUrl() {
      if (douyinLiveConfig.liveRoomUrl) {
        return douyinLiveConfig.liveRoomUrl;
      }
      // 抖音账号ID需拼接用户主页链接，开播后主页会显示直播入口
      return `https://www.douyin.com/user/${douyinLiveConfig.liveRoomId}`;
    }
  </script>

  <!-- 加载状态提示 -->
  <div id="douyinLoading" style="text-align: center; padding: 30px; background: #fafafa; color: #666; font-size: 15px;">
    正在加载抖音直播...
  </div>

  <!-- 直播播放器主体（抖音兼容iframe嵌入） -->
  <iframe
    id="douyinLivePlayer"
    src=""
    width="100%"
    height="550"
    frameborder="0"
    scrolling="no"
    allowfullscreen="true"
    style="display: none; border: none;"
    title="抖音直播间播放"
  ></iframe>
</div>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidDouyinUrl();
    const player = document.getElementById("douyinLivePlayer");
    const loadingTip = document.getElementById("douyinLoading");

    // 校验配置有效性
    if (!liveUrl.includes("douyin.com")) {
      loadingTip.textContent = "配置错误：请填写有效的抖音直播间ID或链接！";
      loadingTip.style.color = "#ff4d4f";
      return;
    }

    // 加载直播画面（抖音iframe需延迟加载以确保兼容性）
    setTimeout(() => {
      player.src = liveUrl;
    }, 500);

    // 监听播放器加载状态
    player.onload = function() {
      player.style.display = "block";
      loadingTip.style.display = "none";
    };

    // 加载超时处理
    setTimeout(() => {
      if (player.style.display === "none") {
        loadingTip.textContent = "直播加载超时，可能是直播间未开播或网络问题";
        loadingTip.style.color = "#ff7a45";
      }
    }, 10000);
  });
</script>
<!-- 模块结尾：GitHub博客专用抖音直播播放器 -->


<!-- 模块开头：GitHub博客专用快手直播播放器 -->
<div style="width: 100%; max-width: 900px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- 快手直播配置区（直接修改下方参数即可） -->
  <script>
    // 👇 核心配置：填写快手直播间ID或完整链接（二选一，链接优先）
    const kuaishouLiveConfig = {
      liveRoomId: "3x8k5q7m9n2p4", // 快手账号ID/直播间ID（示例：从账号主页URL或直播分享页获取）
      liveRoomUrl: "" // 快手直播间完整链接（示例：https://v.kuaishou.com/xxxx/，填链接则ID无效）
    };

    // 自动生成有效直播链接
    function getValidKuaishouUrl() {
      if (kuaishouLiveConfig.liveRoomUrl) {
        return kuaishouLiveConfig.liveRoomUrl;
      }
      // 快手账号ID拼接用户主页链接，开播后主页会显示“直播中”入口
      return `https://www.kuaishou.com/profile/${kuaishouLiveConfig.liveRoomId}`;
    }
  </script>

  <!-- 加载状态与提示 -->
  <div id="kuaishouLoading" style="text-align: center; padding: 30px; background: #fafafa; color: #666; font-size: 15px;">
    正在加载快手直播...
  </div>

  <!-- 直播播放器主体（适配快手iframe嵌入规则） -->
  <iframe
    id="kuaishouLivePlayer"
    src=""
    width="100%"
    height="550"
    frameborder="0"
    scrolling="no"
    allowfullscreen="true"
    style="display: none; border: none;"
    title="快手直播间播放"
  ></iframe>
</div>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidKuaishouUrl();
    const player = document.getElementById("kuaishouLivePlayer");
    const loadingTip = document.getElementById("kuaishouLoading");

    // 校验配置有效性
    if (!liveUrl.includes("kuaishou.com")) {
      loadingTip.textContent = "配置错误：请填写有效的快手直播间ID或链接！";
      loadingTip.style.color = "#ff4d4f";
      return;
    }

    // 延迟加载快手直播（适配平台嵌入兼容性）
    setTimeout(() => {
      player.src = liveUrl;
    }, 600);

    // 监听播放器加载状态
    player.onload = function() {
      player.style.display = "block";
      loadingTip.style.display = "none";
    };

    // 加载超时处理（防止长期显示加载中）
    setTimeout(() => {
      if (player.style.display === "none") {
        loadingTip.textContent = "直播加载超时，可能是直播间未开播或网络问题";
        loadingTip.style.color = "#ff7a45";
      }
    }, 10000);
  });
</script>
<!-- 模块结尾：GitHub博客专用快手直播播放器 -->

<!-- 模块开头：GitHub博客专用哔哩哔哩直播播放器 -->
<div style="width: 100%; max-width: 950px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- 哔哩哔哩直播配置区（直接修改下方参数即可） -->
  <script>
    // 👇 核心配置：填写B站直播间ID或完整链接（二选一，ID优先，更稳定）
    const bilibiliLiveConfig = {
      liveRoomId: "2233", // B站直播间数字ID（示例：从直播URL提取，如https://live.bilibili.com/2233 → ID为2233）
      liveRoomUrl: "" // B站直播间完整链接（示例：https://live.bilibili.com/2233，填ID则此参数无效）
    };

    // 自动生成B站标准直播嵌入链接（适配iframe播放规则）
    function getValidBilibiliUrl() {
      const roomId = bilibiliLiveConfig.liveRoomId || bilibiliLiveConfig.liveRoomUrl.match(/live\.bilibili\.com\/(\d+)/)[1];
      // B站提供专用嵌入链接，带自动播放和基础控制功能
      return `https://live.bilibili.com/embed/${roomId}?autoplay=0&high_quality=1&danmaku=1`;
    }
  </script>

  <!-- 加载状态提示 -->
  <div id="bilibiliLoading" style="text-align: center; padding: 30px; background: #fafafa; color: #666; font-size: 15px;">
    正在加载哔哩哔哩直播...
  </div>

  <!-- 直播播放器主体（使用B站官方嵌入格式，兼容性更强） -->
  <iframe
    id="bilibiliLivePlayer"
    src=""
    width="100%"
    height="600"
    frameborder="0"
    scrolling="no"
    allowfullscreen="true"
    style="display: none; border: none;"
    title="哔哩哔哩直播间播放"
    allow="autoplay; fullscreen"
  ></iframe>
</div>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidBilibiliUrl();
    const player = document.getElementById("bilibiliLivePlayer");
    const loadingTip = document.getElementById("bilibiliLoading");

    // 校验配置有效性（检查是否能提取到直播间ID）
    if (!liveUrl.includes("embed")) {
      loadingTip.textContent = "配置错误：请填写有效的B站直播间ID或链接！";
      loadingTip.style.color = "#fb7299";
      return;
    }

    // 加载B站直播（直接使用官方嵌入链接，稳定性更高）
    player.src = liveUrl;

    // 监听播放器加载状态
    player.onload = function() {
      player.style.display = "block";
      loadingTip.style.display = "none";
    };

    // 加载超时处理
    setTimeout(() => {
      if (player.style.display === "none") {
        loadingTip.textContent = "直播加载超时，可能是直播间未开播、网络问题或ID错误";
        loadingTip.style.color = "#ff7a45";
      }
    }, 8000);
  });
</script>
<!-- 模块结尾：GitHub博客专用哔哩哔哩直播播放器 -->


<!-- 模块开头：GitHub博客专用微信视频号直播播放器 -->
<div style="width: 100%; max-width: 850px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- 微信视频号直播配置区（直接修改下方参数即可） -->
  <script>
    // 👇 核心配置：填写视频号直播“分享链接”或“视频号ID+直播状态提示”（微信无公开嵌入API，用跳转+提示方案）
    const wechatLiveConfig = {
      liveShareUrl: "https://channels.weixin.qq.com/web/pages/live?room_id=1234567890", // 视频号直播分享链接（从微信“分享到朋友圈/复制链接”获取）
      channelId: "gh_abcdef123456", // 视频号ID（从视频号主页“更多资料”获取，格式如gh_开头）
      liveTip: "当前直播需跳转微信查看，点击下方按钮进入" // 自定义提示文案
    };

    // 生成视频号直播访问链接（区分分享链接和账号主页）
    function getValidWechatUrl() {
      return wechatLiveConfig.liveShareUrl || `https://channels.weixin.qq.com/web/pages/profile?username=${wechatLiveConfig.channelId}`;
    }
  </script>

  <!-- 直播状态提示与跳转区域（微信限制iframe直接播放，用跳转方案） -->
  <div id="wechatLiveTip" style="text-align: center; padding: 40px 20px; background: #fafafa; color: #666; font-size: 15px;">
    正在检查微信视频号直播状态...
  </div>

  <!-- 微信直播跳转按钮（适配移动端/PC端，点击跳转微信环境） -->
  <div id="wechatLiveBtnContainer" style="text-align: center; padding: 20px 0; display: none;">
    <a 
      id="wechatLiveBtn" 
      href="" 
      target="_blank" 
      style="display: inline-block; padding: 12px 30px; background: #07c160; color: #fff; border-radius: 4px; text-decoration: none; font-weight: 500; transition: background 0.3s;"
    >
      点击进入微信视频号直播
    </a>
    <p style="margin-top: 15px; font-size: 14px; color: #999;">提示：若无法打开，请在微信内复制链接访问</p>
  </div>
</div>

<script>
  // 页面加载完成后初始化提示与跳转
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidWechatUrl();
    const tipDom = document.getElementById("wechatLiveTip");
    const btnContainer = document.getElementById("wechatLiveBtnContainer");
    const btnDom = document.getElementById("wechatLiveBtn");

    // 校验配置有效性
    if (!liveUrl.includes("channels.weixin.qq.com")) {
      tipDom.textContent = "配置错误：请填写有效的微信视频号直播链接或视频号ID！";
      tipDom.style.color = "#ff4d4f";
      return;
    }

    // 更新提示文案与跳转链接
    setTimeout(() => {
      tipDom.textContent = wechatLiveConfig.liveTip;
      tipDom.style.color = "#333";
      btnDom.href = liveUrl;
      btnContainer.style.display = "block";
    }, 1200);

    // 检测是否为微信环境（可选：微信内打开可直接调起视频号）
    function isWechatEnv() {
      const ua = navigator.userAgent.toLowerCase();
      return ua.includes("micromessenger");
    }

    // 微信环境下优化提示
    if (isWechatEnv()) {
      document.getElementById("wechatLiveBtn").innerText = "点击直接打开微信视频号直播";
    }
  });
</script>
<!-- 模块结尾：GitHub博客专用微信视频号直播播放器 -->


<!-- 模块开头：GitHub博客专用YouTube直播播放器 -->
<div style="width: 100%; max-width: 1000px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- YouTube直播配置区（直接修改下方参数即可） -->
  <script>
    // 👇 核心配置：填写YouTube直播间ID或完整链接（二选一，ID优先，兼容性更强）
    const youtubeLiveConfig = {
      liveRoomId: "abc123XYZ", // YouTube直播间ID（从直播URL提取：如https://www.youtube.com/watch?v=abc123XYZ → ID为abc123XYZ）
      liveRoomUrl: "", // YouTube直播间完整链接（示例：https://www.youtube.com/watch?v=abc123XYZ，填ID则此参数无效）
      showChat: true, // 是否显示直播弹幕（true=显示，false=隐藏）
      autoPlay: false // 是否自动播放（true=自动播放，false=点击播放，受浏览器自动播放策略限制）
    };

    // 自动生成YouTube官方嵌入链接（适配iframe播放规则）
    function getValidYoutubeUrl() {
      // 提取直播间ID（若填链接则自动解析，填ID直接使用）
      const roomId = youtubeLiveConfig.liveRoomId || 
                    (youtubeLiveConfig.liveRoomUrl.match(/watch\?v=([^&]+)/) || [])[1];
      // YouTube直播嵌入链接模板，带弹幕、自动播放控制
      return `https://www.youtube.com/embed/${roomId}?autoplay=${youtubeLiveConfig.autoPlay ? 1 : 0}&enablejsapi=1&rel=0&showinfo=0&modestbranding=1&iv_load_policy=3&cc_load_policy=0&${youtubeLiveConfig.showChat ? 'livechat' : ''}`;
    }
  </script>

  <!-- 加载状态提示 -->
  <div id="youtubeLoading" style="text-align: center; padding: 30px; background: #fafafa; color: #666; font-size: 15px;">
    正在加载YouTube直播...
  </div>

  <!-- 直播播放器主体（使用YouTube官方嵌入格式，稳定兼容） -->
  <iframe
    id="youtubeLivePlayer"
    src=""
    width="100%"
    height="600"
    frameborder="0"
    scrolling="no"
    allowfullscreen="true"
    style="display: none; border: none;"
    title="YouTube直播间播放"
    allow="autoplay; fullscreen; accelerometer; gyroscope"
  ></iframe>
</div>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidYoutubeUrl();
    const player = document.getElementById("youtubeLivePlayer");
    const loadingTip = document.getElementById("youtubeLoading");

    // 校验配置有效性（检查是否提取到有效直播间ID）
    if (!liveUrl.includes("embed/") || liveUrl.includes("embed/undefined")) {
      loadingTip.textContent = "配置错误：请填写有效的YouTube直播间ID或链接！";
      loadingTip.style.color = "#ff4d4f";
      return;
    }

    // 加载YouTube直播（直接使用官方嵌入链接，支持弹幕和播放控制）
    player.src = liveUrl;

    // 监听播放器加载状态
    player.onload = function() {
      player.style.display = "block";
      loadingTip.style.display = "none";
    };

    // 加载超时处理（适配网络延迟情况）
    setTimeout(() => {
      if (player.style.display === "none") {
        loadingTip.textContent = "直播加载超时，可能是：1.直播间未开播 2.网络问题 3.需科学上网";
        loadingTip.style.color = "#ff7a45";
      }
    }, 12000);
  });
</script>
<!-- 模块结尾：GitHub博客专用YouTube直播播放器 -->


<!-- 模块开头：GitHub博客专用音乐播放器 -->
<div style="width: 100%; max-width: 800px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 音乐配置区：直接添加/修改音乐信息即可 -->
  <script>
    // 👇 核心配置：音乐列表（支持多首，可添加/删除，每首需填写title、artist、url）
    const musicList = [
      {
        title: "孤勇者",       // 音乐标题
        artist: "陈奕迅",     // 歌手
        url: "https://example.com/music/gu Yongzhe.mp3", // 音乐文件URL（需是公开可访问的MP3链接）
        cover: "https://example.com/covers/gu Yongzhe.jpg" // 可选：专辑封面图URL
      },
      {
        title: "起风了",
        artist: "买辣椒也用券",
        url: "https://example.com/music/qi Fengle.mp3",
        cover: "https://example.com/covers/qi Fengle.jpg"
      },
      {
        title: "小幸运",
        artist: "田馥甄",
        url: "https://example.com/music/xiao Xingyun.mp3",
        cover: "https://example.com/covers/xiao Xingyun.jpg"
      }
    ];

    // 当前播放索引（默认从第1首开始）
    let currentMusicIndex = 0;
  </script>

  <!-- 播放器主体 -->
  <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
    <!-- 专辑封面 -->
    <div style="position: relative; width: 120px; height: 120px; border-radius: 8px; overflow: hidden; flex-shrink: 0;">
      <img id="musicCover" src="" alt="专辑封面" style="width: 100%; height: 100%; object-fit: cover;">
      <!-- 封面旋转动画（播放时生效） -->
      <style>
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .rotating { animation: rotate 10s linear infinite; }
      </style>
    </div>

    <!-- 音乐信息与控制区 -->
    <div style="flex: 1; min-width: 250px;">
      <!-- 音乐标题与歌手 -->
      <h3 id="musicTitle" style="margin: 0 0 8px; font-size: 18px; color: #333;">--</h3>
      <p id="musicArtist" style="margin: 0 0 15px; font-size: 14px; color: #666;">--</p>

      <!-- 进度条 -->
      <div style="width: 100%; margin-bottom: 12px;">
        <input 
          id="musicProgress" 
          type="range" 
          min="0" 
          max="100" 
          value="0" 
          style="width: 100%; height: 4px; appearance: none; background: #f2f2f2; border-radius: 2px; outline: none;"
        >
        <!-- 进度条样式优化（兼容主流浏览器） -->
        <style>
          #musicProgress::-webkit-slider-thumb {
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #2c3e50;
            cursor: pointer;
          }
          #musicProgress::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #2c3e50;
            cursor: pointer;
            border: none;
          }
        </style>
      </div>

      <!-- 时间与控制按钮 -->
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <span id="musicTime" style="font-size: 12px; color: #999;">00:00 / 00:00</span>
        <div style="display: flex; gap: 15px; align-items: center;">
          <button id="prevBtn" style="background: none; border: none; font-size: 20px; color: #2c3e50; cursor: pointer;">⏮</button>
          <button id="playPauseBtn" style="background: #2c3e50; color: #fff; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center;">▶</button>
          <button id="nextBtn" style="background: none; border: none; font-size: 20px; color: #2c3e50; cursor: pointer;">⏭</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 音乐列表（可选显示） -->
  <div style="margin-top: 20px; border-top: 1px solid #f5f5f5; padding-top: 15px;">
    <h4 style="margin: 0 0 10px; font-size: 14px; color: #666;">播放列表</h4>
    <ul id="musicPlaylist" style="margin: 0; padding: 0; list-style: none;">
      <!-- 列表项由JS动态生成 -->
    </ul>
  </div>
</div>

<script>
  // 初始化音频元素
  const audio = new Audio();
  // 获取DOM元素
  const playPauseBtn = document.getElementById("playPauseBtn");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const musicProgress = document.getElementById("musicProgress");
  const musicTime = document.getElementById("musicTime");
  const musicTitle = document.getElementById("musicTitle");
  const musicArtist = document.getElementById("musicArtist");
  const musicCover = document.getElementById("musicCover");
  const musicPlaylist = document.getElementById("musicPlaylist");
  const coverDom = document.querySelector("#musicCover").parentElement;

  // 加载指定索引的音乐
  function loadMusic(index) {
    const music = musicList[index];
    audio.src = music.url;
    musicTitle.textContent = music.title;
    musicArtist.textContent = music.artist;
    // 加载封面（若无则用默认图）
    musicCover.src = music.cover || "https://via.placeholder.com/120x120?text=Music";
    // 更新当前播放索引
    currentMusicIndex = index;
    // 更新播放列表选中状态
    updatePlaylistActive();
    // 加载完成后自动播放
    audio.load();
    audio.play().then(() => {
      playPauseBtn.textContent = "⏸";
      coverDom.classList.add("rotating");
    }).catch(err => {
      console.error("播放失败：", err);
      playPauseBtn.textContent = "▶";
      coverDom.classList.remove("rotating");
    });
  }

  // 更新播放列表选中状态
  function updatePlaylistActive() {
    const listItems = musicPlaylist.querySelectorAll("li");
    listItems.forEach((item, index) => {
      if (index === currentMusicIndex) {
        item.style.color = "#2c3e50";
        item.style.fontWeight = "500";
      } else {
        item.style.color = "#666";
        item.style.fontWeight = "normal";
      }
    });
  }

  // 格式化时间（秒转分:秒）
  function formatTime(seconds) {
    const min = Math.floor(seconds / 60);
    const sec = Math.floor(seconds % 60);
    return `${min.toString().padStart(2, "0")}:${sec.toString().padStart(2, "0")}`;
  }

  // 初始化播放列表
  function initPlaylist() {
    musicList.forEach((music, index) => {
      const li = document.createElement("li");
      li.textContent = `${index + 1}. ${music.title} - ${music.artist}`;
      li.style.padding = "6px 0";
      li.style.cursor = "pointer";
      li.addEventListener("click", () => loadMusic(index));
      musicPlaylist.appendChild(li);
    });
  }

  // 事件监听：播放/暂停
  playPauseBtn.addEventListener("click", () => {
    if (audio.paused) {
      audio.play().then(() => {
        playPauseBtn.textContent = "⏸";
        coverDom.classList.add("rotating");
      }).catch(err => console.error("播放失败：", err));
    } else {
      audio.pause();
      playPauseBtn.textContent = "▶";
      coverDom.classList.remove("rotating");
    }
  });

  // 事件监听：上一首
  prevBtn.addEventListener("click", () => {
    currentMusicIndex = (currentMusicIndex - 1 + musicList.length) % musicList.length;
    loadMusic(currentMusicIndex);
  });

  // 事件监听：下一首
  nextBtn.addEventListener("click", () => {
    currentMusicIndex = (currentMusicIndex + 1) % musicList.length;
    loadMusic(currentMusicIndex);
  });

  // 事件监听：进度条拖动
  musicProgress.addEventListener("input", () => {
    const progress = (musicProgress.value / 100) * audio.duration;
    audio.currentTime = progress;
  });

  // 事件监听：音频进度更新
  audio.addEventListener("timeupdate", () => {
    const progressPercent = (audio.currentTime / audio.duration) * 100;
    musicProgress.value = progressPercent;
    musicTime.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
  });

  // 事件监听：音频播放结束（自动下一首）
  audio.addEventListener("ended", () => {
    currentMusicIndex = (currentMusicIndex + 1) % musicList.length;
    loadMusic(currentMusicIndex);
  });

  // 初始化：加载第一首音乐+生成播放列表
  window.addEventListener("DOMContentLoaded", () => {
    initPlaylist();
    loadMusic(0);
  });
</script>
<!-- 模块结尾：GitHub博客专用音乐播放器 -->


<!-- 模块开头：GitHub博客专用M3U8电视直播播放器 -->
<div style="width: 100%; max-width: 1000px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- M3U8直播配置区（直接修改下方链接即可） -->
  <script>
    // 👇 核心配置：填写M3U8电视直播链接（需是公开可访问的有效M3U8地址）
    const m3u8LiveConfig = {
      liveUrl: "https://example.com/live/cctv1.m3u8", // M3U8直播源链接（替换为你的实际链接）
      liveName: "CCTV1 综合频道", // 直播频道名称（自定义，如“湖南卫视”“CCTV5+体育”）
      autoPlay: false, // 是否自动播放（true=自动，false=点击播放，受浏览器策略限制）
      controls: true // 是否显示播放器控制栏（进度、音量等，true=显示，false=隐藏）
    };
  </script>

  <!-- 播放器容器 -->
  <div style="position: relative; width: 100%;">
    <!-- 加载状态提示 -->
    <div id="m3u8Loading" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 16px; z-index: 10;">
      正在加载「${m3u8LiveConfig.liveName}」直播...
    </div>

    <!-- 视频播放器主体（用于承载M3U8流） -->
    <video
      id="m3u8LivePlayer"
      style="width: 100%; height: auto; min-height: 500px; background: #000; display: block;"
      playsinline
      webkit-playsinline
      controls="${m3u8LiveConfig.controls}"
      autoplay="${m3u8LiveConfig.autoPlay}"
      preload="auto"
    >
      您的浏览器不支持HTML5视频播放，请升级浏览器后重试。
    </video>

    <!-- 直播频道名称标签 -->
    <div style="position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.5); color: #fff; padding: 5px 12px; border-radius: 4px; font-size: 14px; z-index: 5;">
      ${m3u8LiveConfig.liveName}
    </div>
  </div>

  <!-- 播放状态提示（错误/未开播等） -->
  <div id="m3u8StatusTip" style="padding: 15px; text-align: center; font-size: 14px; color: #666; display: none;"></div>
</div>

<!-- 引入M3U8解析依赖（Hls.js，处理M3U8流播放） -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.14/dist/hls.min.js"></script>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const videoElement = document.getElementById("m3u8LivePlayer");
    const loadingDom = document.getElementById("m3u8Loading");
    const statusTipDom = document.getElementById("m3u8StatusTip");
    const liveUrl = m3u8LiveConfig.liveUrl;

    // 替换加载提示中的频道名称
    loadingDom.textContent = `正在加载「${m3u8LiveConfig.liveName}」直播...`;

    // 校验M3U8链接有效性
    if (!liveUrl || !liveUrl.endsWith(".m3u8")) {
      loadingDom.style.display = "none";
      statusTipDom.textContent = "配置错误：请填写有效的M3U8直播链接（链接需以.m3u8结尾）！";
      statusTipDom.style.color = "#ff4d4f";
      statusTipDom.style.display = "block";
      return;
    }

    // 检查浏览器是否支持HLS（M3U8）播放
    function initM3u8Player() {
      // 情况1：浏览器原生支持HLS（如Safari）
      if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
        videoElement.src = liveUrl;
        bindPlayerEvents();
      } 
      // 情况2：浏览器不原生支持，用Hls.js解析
      else if (window.Hls) {
        const hls = new Hls({
          enableWorker: true, // 启用Worker提升性能
          lowLatencyMode: true, // 低延迟模式（直播更实时）
          backBufferLength: 90 // 缓存长度（秒）
        });

        // 绑定Hls.js事件（加载、错误等）
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          console.log("M3U8直播源解析成功，开始播放");
          videoElement.src = liveUrl;
          if (m3u8LiveConfig.autoPlay) {
            videoElement.play().catch(handlePlayError);
          }
          bindPlayerEvents();
        });

        hls.on(Hls.Events.ERROR, (event, data) => {
          console.error("M3U8播放错误：", data);
          loadingDom.style.display = "none";
          statusTipDom.textContent = `直播加载失败：${data.details || "链接无效或直播未开播"}`;
          statusTipDom.style.color = "#ff4d4f";
          statusTipDom.style.display = "block";
          // 尝试恢复播放（针对临时网络错误）
          if (data.fatal) {
            switch(data.type) {
              case Hls.ErrorTypes.NETWORK_ERROR:
                hls.startLoad();
                break;
              case Hls.ErrorTypes.MEDIA_ERROR:
                hls.recoverMediaError();
                break;
              default:
                break;
            }
          }
        });

        // 加载M3U8链接
        hls.loadSource(liveUrl);
        hls.attachMedia(videoElement);
      } 
      // 情况3：浏览器完全不支持M3U8
      else {
        loadingDom.style.display = "none";
        statusTipDom.textContent = "您的浏览器不支持M3U8直播播放，请使用Chrome、Safari或Edge等现代浏览器！";
        statusTipDom.style.color = "#ff4d4f";
        statusTipDom.style.display = "block";
      }
    }

    // 绑定视频播放器事件（播放、暂停、结束等）
    function bindPlayerEvents() {
      // 播放成功：隐藏加载提示
      videoElement.addEventListener("play", () => {
        loadingDom.style.display = "none";
        statusTipDom.style.display = "none";
      });

      // 播放暂停：显示“已暂停”提示
      videoElement.addEventListener("pause", () => {
        if (!videoElement.ended) {
          statusTipDom.textContent = "直播已暂停，点击播放按钮继续观看";
          statusTipDom.style.color = "#666";
          statusTipDom.style.display = "block";
        }
      });

      // 播放错误：显示错误信息
      videoElement.addEventListener("error", () => {
        loadingDom.style.display = "none";
        statusTipDom.textContent = `直播播放错误：${videoElement.error.message || "未知错误"}`;
        statusTipDom.style.color = "#ff4d4f";
        statusTipDom.style.display = "block";
      });
    }

    // 处理自动播放失败（浏览器拦截）
    function handlePlayError(err) {
      console.warn("自动播放被拦截：", err);
      loadingDom.style.display = "none";
      statusTipDom.textContent = "请点击播放器的「播放」按钮开始观看直播（浏览器拦截了自动播放）";
      statusTipDom.style.color = "#666";
      statusTipDom.style.display = "block";
    }

    // 初始化M3U8播放器
    initM3u8Player();
  });
</script>
<!-- 模块结尾：GitHub博客专用M3U8电视直播播放器 -->





<!-- 模块开头：GitHub博客专用QQ联系方式模块 -->
<div style="width: 100%; max-width: 600px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; display: flex; flex-wrap: wrap; align-items: center; gap: 20px;">
  <!-- QQ图标区域 -->
  <div style="width: 100px; height: 100px; flex-shrink: 0; border-radius: 50%; background: #12B7F5; display: flex; align-items: center; justify-content: center;">
    <span style="font-size: 48px; color: #ffffff; font-weight: bold;">QQ</span>
  </div>

  <!-- 联系方式核心区域 -->
  <div style="flex: 1; min-width: 250px;">
    <h3 style="margin: 0 0 15px; font-size: 18px; color: #333;">QQ联系我</h3>
    
    <!-- QQ号码展示 -->
    <div style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px;">
      <span style="width: 60px; font-size: 14px; color: #666;">QQ号码：</span>
      <span id="qq-number" style="font-size: 16px; color: #333; font-weight: 500;">123456789</span>
      <button onclick="copyQQNumber()" style="padding: 4px 8px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; font-size: 12px; color: #666; cursor: pointer;">复制</button>
    </div>

    <!-- QQ状态提示 -->
    <div style="margin-bottom: 12px; display: flex; align-items: center; gap: 10px;">
      <span style="width: 60px; font-size: 14px; color: #666;">在线状态：</span>
      <span style="font-size: 14px; color: #12B7F5; display: flex; align-items: center; gap: 5px;">
        <span style="width: 8px; height: 8px; border-radius: 50%; background: #12B7F5;"></span>
        工作日9:00-18:00在线，看到消息会及时回复
      </span>
    </div>

    <!-- 快捷联系按钮 -->
    <div style="display: flex; gap: 10px;">
      <!-- 一键加好友链接（需替换自己的QQ号） -->
      <a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=123456789&website=www.oicqzone.com" 
         target="_blank" 
         style="padding: 8px 16px; background: #12B7F5; color: #ffffff; border-radius: 4px; text-decoration: none; font-size: 14px; transition: background 0.3s;">
        一键加好友
      </a>
      <!-- 发起临时会话链接（需替换自己的QQ号） -->
      <a href="tencent://message/?uin=123456789&Site=qq&Menu=yes" 
         target="_blank" 
         style="padding: 8px 16px; background: #f5f5f5; color: #333; border: 1px solid #ddd; border-radius: 4px; text-decoration: none; font-size: 14px; transition: background 0.3s;">
        发起临时会话
      </a>
    </div>
  </div>
</div>

<script>
  // 复制QQ号码功能
  function copyQQNumber() {
    const qqNumber = document.getElementById("qq-number").textContent;
    // 创建临时输入框实现复制
    const tempInput = document.createElement("input");
    tempInput.value = qqNumber;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand("copy");
    document.body.removeChild(tempInput);
    // 提示复制成功
    alert(`QQ号码 ${qqNumber} 已复制到剪贴板！`);
  }

  // 页面加载时替换QQ号（也可直接在HTML中修改）
  window.addEventListener("DOMContentLoaded", () => {
    // 👇 替换为你的真实QQ号，会同步更新所有关联链接和显示
    const yourQQNumber = "123456789";
    
    // 更新QQ号码显示
    document.getElementById("qq-number").textContent = yourQQNumber;
    // 更新一键加好友链接
    document.querySelector("a[href*='AddContact']").href = `tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=${yourQQNumber}&website=www.oicqzone.com`;
    // 更新临时会话链接
    document.querySelector("a[href*='message']").href = `tencent://message/?uin=${yourQQNumber}&Site=qq&Menu=yes`;
  });
</script>
<!-- 模块结尾：GitHub博客专用QQ联系方式模块 -->

<!-- 模块开头：GitHub博客专用微信联系方式模块 -->
<div style="width: 100%; max-width: 600px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; display: flex; flex-wrap: wrap; align-items: center; gap: 25px;">
  <!-- 微信二维码区域 -->
  <div style="flex-shrink: 0; text-align: center;">
    <!-- 微信图标 -->
    <div style="width: 80px; height: 80px; margin: 0 auto 10px; border-radius: 20px; background: #07C160; display: flex; align-items: center; justify-content: center;">
      <span style="font-size: 40px; color: #ffffff; font-weight: bold;">微</span>
    </div>
    <!-- 二维码占位（替换为自己的微信二维码图片URL） -->
    <div style="width: 180px; height: 180px; margin: 0 auto; border: 1px solid #f5f5f5; border-radius: 8px; display: flex; align-items: center; justify-content: center; background: #fafafa;">
      <img id="wechat-qrcode" src="https://via.placeholder.com/160x160?text=微信二维码" alt="微信二维码" style="width: 160px; height: 160px; object-fit: cover;">
    </div>
    <p style="margin: 10px 0 0; font-size: 12px; color: #999;">扫码添加微信好友</p>
  </div>

  <!-- 微信联系信息区域 -->
  <div style="flex: 1; min-width: 250px;">
    <h3 style="margin: 0 0 18px; font-size: 18px; color: #333;">微信联系我</h3>
    
    <!-- 微信号展示 -->
    <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
      <span style="min-width: 70px; font-size: 14px; color: #666;">微信号：</span>
      <span id="wechat-id" style="font-size: 16px; color: #333; font-weight: 500; flex: 1;">wechat123456</span>
      <button onclick="copyWechatId()" style="padding: 5px 10px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; font-size: 12px; color: #666; cursor: pointer; white-space: nowrap;">复制微信号</button>
    </div>

    <!-- 联系提示 -->
    <div style="margin-bottom: 15px; padding: 12px; border-radius: 8px; background: #fafafa; border-left: 4px solid #07C160;">
      <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.5;">
        添加好友时请备注 <span style="color: #07C160; font-weight: 500;">“来自GitHub博客”</span>，方便我快速通过~<br>
        日常会及时回复消息，若未秒回请稍等，看到后会第一时间处理
      </p>
    </div>

    <!-- 额外联系说明 -->
    <div style="font-size: 13px; color: #999;">
      <p style="margin: 0;">也可直接搜索微信号添加，或保存上方二维码图片到手机，打开微信“扫一扫”识别</p>
    </div>
  </div>
</div>

<script>
  // 复制微信号功能
  function copyWechatId() {
    const wechatId = document.getElementById("wechat-id").textContent;
    // 创建临时输入框实现复制
    const tempInput = document.createElement("input");
    tempInput.value = wechatId;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand("copy");
    document.body.removeChild(tempInput);
    // 提示复制成功
    alert(`微信号 ${wechatId} 已复制到剪贴板！`);
  }

  // 页面加载时替换微信信息（集中修改此处即可）
  window.addEventListener("DOMContentLoaded", () => {
    // 👇 替换为你的微信信息
    const yourWechatId = "wechat123456"; // 你的微信号
    const yourWechatQrcodeUrl = "https://via.placeholder.com/160x160?text=微信二维码"; // 你的微信二维码图片URL（建议用公开图床链接）

    // 更新微信号显示
    document.getElementById("wechat-id").textContent = yourWechatId;
    // 更新微信二维码图片
    document.getElementById("wechat-qrcode").src = yourWechatQrcodeUrl;
    document.getElementById("wechat-qrcode").alt = `微信二维码（微信号：${yourWechatId}）`;
  });
</script>
<!-- 模块结尾：GitHub博客专用微信联系方式模块 -->


<!-- 模块开头：GitHub博客专用邮箱联系方式模块 -->
<div style="width: 100%; max-width: 650px; margin: 25px auto; padding: 22px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 头部图标与标题 -->
  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
    <div style="width: 48px; height: 48px; border-radius: 8px; background: #007AFF; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
      <span style="font-size: 24px; color: #ffffff;">✉️</span>
    </div>
    <h3 style="margin: 0; font-size: 18px; color: #333;">邮箱联系我</h3>
  </div>

  <!-- 邮箱核心信息区 -->
  <div style="display: flex; flex-wrap: wrap; align-items: center; gap: 15px; margin-bottom: 22px;">
    <!-- 邮箱地址展示 -->
    <div style="flex: 1; min-width: 280px; padding: 15px; border-radius: 8px; background: #fafafa; border-left: 4px solid #007AFF;">
      <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
        <div>
          <p style="margin: 0 0 5px; font-size: 14px; color: #666;">我的邮箱</p>
          <p id="email-address" style="margin: 0; font-size: 16px; color: #333; font-weight: 500; word-break: break-all;">example@163.com</p>
        </div>
        <button onclick="copyEmail()" style="padding: 6px 12px; background: #007AFF; color: #ffffff; border: none; border-radius: 4px; font-size: 14px; cursor: pointer; transition: background 0.3s;">
          复制邮箱
        </button>
      </div>
    </div>

    <!-- 一键发送按钮 -->
    <a id="email-send-link" href="mailto:example@163.com?subject=来自GitHub博客的联系" 
       target="_blank" 
       style="padding: 10px 20px; background: #f5f5f5; color: #333; border: 1px solid #ddd; border-radius: 4px; text-decoration: none; font-size: 14px; white-space: nowrap; transition: background 0.3s;">
       一键发送邮件
    </a>
  </div>

  <!-- 邮件备注提示 -->
  <div style="padding: 14px; border-radius: 8px; background: #f8f9fa; border: 1px solid #f0f0f0;">
    <p style="margin: 0; font-size: 14px; color: #666; line-height: 1.6;">
      <span style="color: #007AFF; font-weight: 500;">建议备注</span>：发送邮件时可在主题栏注明“来自GitHub博客”，正文说明你的需求（如技术交流、合作咨询等），我会在1-2个工作日内回复，感谢理解～
    </p>
  </div>
</div>

<script>
  // 复制邮箱功能
  function copyEmail() {
    const email = document.getElementById("email-address").textContent;
    // 创建临时输入框实现复制（兼容所有浏览器）
    const tempInput = document.createElement("textarea");
    tempInput.value = email;
    document.body.appendChild(tempInput);
    tempInput.select();
    document.execCommand("copy");
    document.body.removeChild(tempInput);
    // 提示复制成功
    alert(`邮箱 ${email} 已复制到剪贴板，可直接粘贴使用～`);
  }

  // 页面加载时替换邮箱信息（集中修改此处即可）
  window.addEventListener("DOMContentLoaded", () => {
    // 👇 替换为你的真实邮箱信息
    const yourEmail = "example@163.com"; // 你的邮箱地址（如xxx@qq.com、xxx@gmail.com）
    const emailSubject = "来自GitHub博客的联系"; // 邮件默认主题（可自定义）

    // 更新邮箱地址显示
    document.getElementById("email-address").textContent = yourEmail;
    // 更新“一键发送邮件”链接（自动拼接主题）
    document.getElementById("email-send-link").href = `mailto:${yourEmail}?subject=${encodeURIComponent(emailSubject)}`;
  });
</script>
<!-- 模块结尾：GitHub博客专用邮箱联系方式模块 -->



<!-- 模块开头：GitHub博客专用Telegram Bot前端直连消息模块（免登录） -->
<div style="width: 100%; max-width: 700px; margin: 25px auto; padding: 22px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 头部信息：图标+标题+安全提示 -->
  <div style="margin-bottom: 20px; border-bottom: 1px solid #f5f5f5; padding-bottom: 15px;">
    <h3 style="margin: 0 0 8px; font-size: 18px; color: #333; display: flex; align-items: center; gap: 10px;">
      <span style="font-size: 22px; color: #0088cc;">✈️</span>
      发送消息给 Telegram Bot
    </h3>
    <p style="margin: 0 0 8px; font-size: 14px; color: #666;">免登录直接发送，消息将实时送达指定Bot</p>
    <p style="margin: 0; font-size: 12px; color: #ff4d4f; background: #fff8f8; padding: 6px; border-radius: 4px;">
    </p>
  </div>

  <!-- 消息输入表单 -->
  <form id="tg-bot-form" style="display: flex; flex-direction: column; gap: 15px;">
    <!-- Bot配置（访客无需填写，你提前设置好） -->
    <div style="padding: 10px; background: #fafafa; border-radius: 6px; font-size: 14px; color: #666;">
      当前接收Bot：<span id="bot-name" style="color: #0088cc; font-weight: 500;">@Your_TJ_Bot</span>
    </div>

    <!-- 访客消息内容 -->
    <div>
      <label style="display: block; margin-bottom: 6px; font-size: 14px; color: #666;">你的消息（必填）</label>
      <textarea 
        id="message-content" 
        placeholder="请输入要发送的内容，比如咨询、反馈等..." 
        style="width: 100%; min-height: 150px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; resize: vertical; box-sizing: border-box; font-family: inherit; font-size: 14px;"
        required
      ></textarea>
    </div>

    <!-- 可选联系信息（方便你回复） -->
    <div>
      <label style="display: block; margin-bottom: 6px; font-size: 14px; color: #666;">你的联系方式（可选，如Telegram用户名/邮箱）</label>
      <input 
        type="text" 
        id="visitor-contact" 
        placeholder="例：@taylor_graham 或 xxx@email.com" 
        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px;"
      >
    </div>

    <!-- 发送按钮与反馈 -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <button 
        type="submit" 
        id="send-btn" 
        style="padding: 12px 24px; background: #0088cc; color: #ffffff; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background 0.3s;"
      >
        发送消息
      </button>
      <div id="send-status" style="font-size: 14px; font-weight: 500;"></div>
    </div>
  </form>
</div>

<script>
  // *************************
  // 你需要修改的核心配置（必改）
  // *************************
  const TG_CONFIG = {
    botToken: "8430958771:AAG4bkt9cR5_ZTXgeM3MeH7oSODpMjM6wJs", 
    chatId: "6562518027", // 你的Telegram账号ID
    botUsername: "@youzaiwebblogbot" // 你的Bot用户名
  };

  // DOM元素获取
  const form = document.getElementById("tg-bot-form");
  const sendBtn = document.getElementById("send-btn");
  const sendStatus = document.getElementById("send-status");
  const messageContent = document.getElementById("message-content");
  const visitorContact = document.getElementById("visitor-contact");
  const botName = document.getElementById("bot-name");

  // 页面加载时填充Bot名称
  window.addEventListener("DOMContentLoaded", () => {
    botName.textContent = TG_CONFIG.botUsername;
  });

  // 格式化消息内容（包含时间和联系方式）
  function getFormattedMessage() {
    const contact = visitorContact.value.trim() || "未提供联系方式";
    const content = messageContent.value.trim();
    const time = new Date().toLocaleString("zh-CN", {
      year: "numeric", month: "2-digit", day: "2-digit",
      hour: "2-digit", minute: "2-digit"
    });
    return `【GitHub博客访客消息】\n发送时间：${time}\n访客联系方式：${contact}\n消息内容：\n${content}`;
  }

  // 前端直接调用Telegram Bot API发送消息
  async function sendToTelegramBot(message) {
    // Telegram Bot API的发送消息接口
    const apiUrl = `https://api.telegram.org/bot${TG_CONFIG.botToken}/sendMessage`;
    
    try {
      const response = await fetch(apiUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: TG_CONFIG.chatId,
          text: message,
          parse_mode: "HTML" // 支持简单HTML格式（可选）
        })
      });

      const data = await response.json();
      return data.ok; // API返回ok为true表示发送成功
    } catch (err) {
      console.error("发送失败：", err);
      return false;
    }
  }

  // 表单提交处理
  form.addEventListener("submit", async (e) => {
    e.preventDefault(); // 阻止表单默认刷新

    // 按钮状态锁定（防止重复发送）
    sendBtn.disabled = true;
    sendBtn.style.opacity = "0.7";
    sendBtn.textContent = "发送中...";
    sendStatus.textContent = "";

    try {
      // 1. 获取格式化后的消息
      const message = getFormattedMessage();
      // 2. 调用API发送消息
      const isSuccess = await sendToTelegramBot(message);

      // 3. 显示发送结果
      if (isSuccess) {
        sendStatus.textContent = "✅ 发送成功！";
        sendStatus.style.color = "#008000";
        // 清空输入框（保留联系方式）
        messageContent.value = "";
      } else {
        sendStatus.textContent = "❌ 发送失败，请重试！";
        sendStatus.style.color = "#ff4d4f";
      }
    } catch (err) {
      sendStatus.textContent = "❌ 网络错误，请检查连接！";
      sendStatus.style.color = "#ff4d4f";
    } finally {
      // 恢复按钮状态
      sendBtn.disabled = false;
      sendBtn.style.opacity = "1";
      sendBtn.textContent = "发送消息";
    }
  });
</script>
<!-- 模块结尾：GitHub博客专用Telegram Bot前端直连消息模块（免登录） -->




<!-- GitHub博客专用：Telegram Bot聊天模块（修复版） -->
<div style="width: 100%; max-width: 600px; margin: 20px auto; padding: 20px; border-radius: 8px; background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.05); font-family: -apple-system, BlinkMacSystemFont, sans-serif;">
  <h3 style="margin: 0 0 15px; font-size: 17px; color: #333; display: flex; align-items: center; gap: 8px;">
    <span style="color: #0088cc;">💬</span> 与我聊天（免登录）
  </h3>

  <!-- 聊天记录区 -->
  <div id="chatBox" style="height: 350px; border: 1px solid #eee; border-radius: 6px; padding: 12px; overflow-y: auto; background: #fafafa; margin-bottom: 15px; display: flex; flex-direction: column; gap: 10px; scroll-behavior: smooth;"></div>

  <!-- 输入区 -->
  <div style="display: flex; flex-direction: column; gap: 10px;">
    <input 
      type="text" 
      id="userName" 
      placeholder="你的昵称（可选）" 
      style="padding: 10px; border: 1px solid #eee; border-radius: 6px; font-size: 14px;"
    >
    <textarea 
      id="userMsg" 
      placeholder="输入消息..." 
      style="padding: 10px; border: 1px solid #eee; border-radius: 6px; min-height: 80px; resize: none; font-size: 14px; font-family: inherit;"
    ></textarea>
    <button 
      id="sendBtn" 
      style="padding: 11px; border: none; border-radius: 6px; background: #0088cc; color: #fff; font-size: 14px; cursor: pointer; transition: background 0.2s;"
    >发送消息</button>
    <div id="tip" style="font-size: 12px; color: #666; text-align: center; margin-top: 5px;"></div>
  </div>
</div>

<script>
  // *************************
  // 配置项（请确认这2个值正确！）
  // *************************
  const BOT_TOKEN = "8430958771:AAG4bkt9cR5_ZTXgeM3MeH7oSODpMjM6wJs"; // 你的Bot Token（注意开头是"bot"吗？）
  const CHAT_ID = "6562518027"; // 你的Telegram ID（纯数字，不是用户名）

  // 固定配置（无需修改）
  const REFRESH_INTERVAL = 60000; // 缩短刷新间隔为1分钟，更快收到回复
  const MAX_REFRESH_TIMES = 5;    // 增加刷新次数，减少漏接回复
  let replyTimer = null;          // 刷新定时器
  let refreshCount = 0;           // 刷新次数计数
  let lastUpdateId = 0;           // 用Update ID替代Msg ID，避免漏消息（核心修复）
  const chatBox = document.getElementById("chatBox");
  const tipElem = document.getElementById("tip");

  // 页面加载完成后初始化
  document.addEventListener("DOMContentLoaded", () => {
    // 加载欢迎消息
    addMsgToChat("系统", "你好！消息会直接发给我，我看到后会尽快回复～", true);
    // 绑定发送事件
    document.getElementById("sendBtn").addEventListener("click", sendUserMsg);
    // 绑定Enter键发送（Shift+Enter换行）
    document.getElementById("userMsg").addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendUserMsg();
      }
    });
    // 初始拉取历史回复（修复：页面打开时就查未读消息）
    checkBotReply();
  });

  /**
   * 1. 添加消息到聊天框（优化样式和兼容性）
   * @param {string} sender - 发送者名称
   * @param {string} content - 消息内容
   * @param {boolean} isBot - 是否是Bot/系统消息
   */
  function addMsgToChat(sender, content, isBot = false) {
    if (!chatBox) return;
    const msgDiv = document.createElement("div");
    // 区分消息方向，优化手机端显示
    msgDiv.style.cssText = `
      max-width: 85%; 
      padding: 8px 12px; 
      border-radius: ${isBot ? "8px 8px 8px 2px" : "8px 8px 2px 8px"}; 
      font-size: 14px; 
      word-break: break-all; 
      align-self: ${isBot ? "flex-start" : "flex-end"};
      background: ${isBot ? "#e8f4f8" : "#0088cc"};
      color: ${isBot ? "#333" : "#fff"};
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    `;
    // 转义特殊字符，避免HTML注入（修复：防止消息含<>导致样式错乱）
    const safeSender = sender.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    const safeContent = content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    // 添加时间戳，方便追溯
    const time = new Date().toLocaleTimeString("zh-CN", { hour: "2-digit", minute: "2-digit" });
    msgDiv.innerHTML = `
      <span style="font-weight: 500; margin-right: 5px;">${safeSender}</span>
      <span style="font-size: 12px; opacity: 0.7;">${time}</span>
      <div style="margin-top: 4px;">${safeContent}</div>
    `;
    chatBox.appendChild(msgDiv);
    // 自动滚动到底部（修复：确保最新消息可见）
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  /**
   * 2. 发送用户消息（核心修复：完善错误反馈+API调用格式）
   */
  async function sendUserMsg() {
    const userNameInput = document.getElementById("userName");
    const userMsgInput = document.getElementById("userMsg");
    const sendBtn = document.getElementById("sendBtn");

    // 1. 输入验证
    const userName = userNameInput.value.trim() || "匿名访客";
    const userMsg = userMsgInput.value.trim();
    if (!userMsg) {
      showTip("❌ 消息不能为空哦～", "error");
      return;
    }

    // 2. 锁定按钮，防止重复发送
    sendBtn.disabled = true;
    sendBtn.textContent = "发送中...";
    showTip("⏳ 正在发送消息...", "info");

    try {
      // 3. 调用Telegram API发送消息（修复：API地址格式+参数完整性）
      const apiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
      const response = await fetch(apiUrl, {
        method: "POST",
        headers: { 
          "Content-Type": "application/json",
          "Accept": "application/json" // 增加Accept头，提升兼容性
        },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: `【${userName}】(${new Date().toLocaleString()})：\n${userMsg}`,
          disable_web_page_preview: true,
          parse_mode: "HTML" // 明确解析模式，避免消息格式错乱
        }),
        timeout: 15000 // 延长超时时间，应对网络波动
      });

      // 4. 处理API响应
      const result = await response.json();
      if (result.ok) {
        // 发送成功：添加到聊天框+清空输入
        addMsgToChat(userName, userMsg, false);
        userMsgInput.value = "";
        showTip("✅ 消息发送成功！我会尽快回复～", "success");
        // 启动回复监听
        startReplyListening();
      } else {
        // 明确错误原因（比如Token错误、ID错误）
        throw new Error(`API错误：${result.description || "未知错误"}`);
      }
    } catch (err) {
      // 详细错误提示，方便你排查（修复：之前只显示“发送失败”，现在给具体原因）
      let errorMsg = "发送失败，请检查：";
      if (err.message.includes("401")) errorMsg += "Bot Token错误";
      else if (err.message.includes("400")) errorMsg += "Chat ID错误或Bot未与你对话过";
      else if (err.message.includes("timeout")) errorMsg += "网络超时，请重试";
      else errorMsg += err.message;
      
      showTip(errorMsg, "error");
      console.error("发送消息错误：", err); // 控制台打印详细错误，便于你调试
    } finally {
      // 恢复按钮状态
      sendBtn.disabled = false;
      sendBtn.textContent = "发送消息";
    }
  }

  /**
   * 3. 启动回复监听（修复：用getUpdates正确拉取回复，避免漏消息）
   */
  function startReplyListening() {
    // 清除之前的定时器，避免多个同时运行
    if (replyTimer) clearInterval(replyTimer);
    refreshCount = 0;

    // 立即拉取一次，然后定时拉取
    checkBotReply();
    replyTimer = setInterval(() => {
      checkBotReply();
      refreshCount++;

      // 达到最大次数，停止监听并提示
      if (refreshCount >= MAX_REFRESH_TIMES) {
        clearInterval(replyTimer);
        addMsgToChat("系统", "回复监听已停止，若未收到回复可重新发送消息～", true);
        showTip("⏹️ 回复监听已停止，可重新发消息触发", "info");
      }
    }, REFRESH_INTERVAL);
  }

  /**
   * 4. 拉取Bot回复（核心修复：用Update ID分页，确保只拉取新消息）
   */
  async function checkBotReply() {
    try {
      // 调用getUpdates，只拉取lastUpdateId之后的新消息（避免重复拉取旧消息）
      const apiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/getUpdates?offset=${lastUpdateId + 1}&timeout=3`;
      const response = await fetch(apiUrl, {
        method: "GET",
        timeout: 10000
      });

      const result = await response.json();
      if (result.ok && result.result.length > 0) {
        // 遍历所有新消息，筛选出Bot发给你的回复
        result.result.forEach(update => {
          // 更新lastUpdateId，下次从这里开始拉取
          lastUpdateId = Math.max(lastUpdateId, update.update_id);

          // 条件：是消息类型 + 发送者是Bot + 接收者是你（避免拉取其他聊天消息）
          if (update.message && update.message.from.is_bot && update.message.chat.id.toString() === CHAT_ID.toString()) {
            const botReply = update.message.text || "（Bot发送了非文本消息，暂不支持显示）";
            addMsgToChat("我", botReply, true);
            showTip("✅ 收到回复啦～", "success");

            // 收到回复后，停止后续监听
            if (replyTimer) {
              clearInterval(replyTimer);
              replyTimer = null;
            }
          }
        });
      }
    } catch (err) {
      console.error("拉取回复错误：", err);
      // 拉取错误不提示用户，避免干扰
    }
  }

  /**
   * 5. 显示提示信息（优化：区分成功/错误/普通提示，颜色不同）
   */
  function showTip(text, type = "info") {
    if (!tipElem) return;
    tipElem.textContent = text;
    // 不同类型提示用不同颜色
    if (type === "error") tipElem.style.color = "#ff4d4f";
    else if (type === "success") tipElem.style.color = "#00b42a";
    else tipElem.style.color = "#666";
  }
</script>











<!-- 模块开头：GitHub博客专用Facebook直播嵌入模块 -->
<div style="width: 100%; max-width: 1000px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 直播标题与状态区 -->
  <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
    <h3 style="margin: 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 8px;">
      <span style="color: #1877F2; font-size: 22px;">📺</span>
      Facebook 直播
    </h3>
    <!-- 直播状态标签（默认“加载中”，可根据实际状态修改） -->
    <span id="fb-live-status" style="padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 500; background: #f0f2f5; color: #65676b;">
      加载直播状态中...
    </span>
  </div>

  <!-- 直播播放器容器 -->
  <div style="position: relative; width: 100%; border-radius: 8px; overflow: hidden; background: #000; margin-bottom: 15px;">
    <!-- Facebook直播嵌入iframe（核心） -->
    <iframe
      id="fb-live-player"
      src="" 
      width="100%" 
      height="500" 
      style="border: none; display: block;"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
      loading="lazy"
    ></iframe>

    <!-- 加载失败备用提示 -->
    <div id="fb-live-fallback" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; flex-direction: column; align-items: center; justify-content: center; color: #ffffff; text-align: center; padding: 20px;">
      <span style="font-size: 48px; margin-bottom: 15px;">⚠️</span>
      <h4 style="margin: 0 0 10px; font-size: 18px;">直播加载失败</h4>
      <p style="margin: 0; font-size: 14px; max-width: 500px;">可能是直播未开始、链接失效，或当前网络无法访问Facebook，请稍后重试</p>
      <a id="fb-live-direct-link" href="" target="_blank" style="margin-top: 15px; padding: 8px 16px; background: #1877F2; color: #ffffff; border-radius: 4px; text-decoration: none; font-size: 14px;">
        前往Facebook观看
      </a>
    </div>
  </div>

  <!-- 直播信息补充区 -->
  <div style="padding: 15px; border-radius: 8px; background: #f0f2f5;">
    <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
      <div style="flex: 1; min-width: 250px;">
        <p style="margin: 0; font-size: 14px; color: #65676b;">
          直播来源：<a id="fb-page-link" href="" target="_blank" style="color: #1877F2; text-decoration: none; font-weight: 500;"></a>
        </p>
      </div>
      <div style="font-size: 12px; color: #65676b;">
        提示：若直播无声音，可检查浏览器音量设置；点击播放器右下角“全屏”图标可切换全屏模式
      </div>
    </div>
  </div>
</div>

<script>
  // *************************
  // 你需要修改的核心配置（必改）
  // *************************
  const FB_LIVE_CONFIG = {
    // Facebook直播的“视频ID”或“直播链接”（二选一即可）
    liveVideoId: "123456789012345", // 从直播链接中提取（如链接https://www.facebook.com/abc/videos/123456789012345/中的“123456789012345”）
    livePageUrl: "https://www.facebook.com/YourFacebookPage", // 你的Facebook主页链接（用于补充信息和备用跳转）
    autoPlay: false // 是否自动播放（true=自动，false=点击播放，受浏览器策略限制）
  };

  // DOM元素获取
  const livePlayer = document.getElementById("fb-live-player");
  const liveStatus = document.getElementById("fb-live-status");
  const liveFallback = document.getElementById("fb-live-fallback");
  const liveDirectLink = document.getElementById("fb-live-direct-link");
  const pageLink = document.getElementById("fb-page-link");

  // 初始化Facebook直播嵌入
  function initFbLivePlayer() {
    // 1. 拼接Facebook直播嵌入链接（官方标准格式）
    const fbEmbedUrl = `https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fvideos%2F${FB_LIVE_CONFIG.liveVideoId}%2F&show_text=0&width=800&autoplay=${FB_LIVE_CONFIG.autoPlay ? 1 : 0}&mute=0&allow_fullscreen=1&loop=0&small_header=0&adapter_width=100%25&hide_cover=0&show_facepile=0`;
    
    // 2. 设置播放器和链接
    livePlayer.src = fbEmbedUrl;
    liveDirectLink.href = `https://www.facebook.com/videos/${FB_LIVE_CONFIG.liveVideoId}/`;
    pageLink.href = FB_LIVE_CONFIG.livePageUrl;
    pageLink.textContent = FB_LIVE_CONFIG.livePageUrl.replace("https://www.facebook.com/", "").replace("/", "");

    // 3. 监听iframe加载状态（判断是否加载成功）
    livePlayer.onload = () => {
      liveStatus.textContent = "直播加载完成";
      liveStatus.style.background = "#e8f4ea";
      liveStatus.style.color = "#1a7f40";
    };

    // 4. 加载超时处理（10秒后仍未加载则显示备用提示）
    setTimeout(() => {
      if (livePlayer.contentDocument.body.innerHTML.includes("error") || livePlayer.contentDocument.body.innerHTML.trim() === "") {
        livePlayer.style.display = "none";
        liveFallback.style.display = "flex";
        liveStatus.textContent = "直播加载失败";
        liveStatus.style.background = "#ffebee";
        liveStatus.style.color = "#d32f2f";
      }
    }, 10000);
  }

  // 页面加载完成后初始化
  window.addEventListener("DOMContentLoaded", initFbLivePlayer);
</script>
<!-- 模块结尾：GitHub博客专用Facebook直播嵌入模块 -->


<!-- 模块开头：GitHub博客专用Instagram直播嵌入模块 -->
<div style="width: 100%; max-width: 800px; margin: 25px auto; padding: 20px; border-radius: 10px; box-shadow: 0 3px 15px rgba(0,0,0,0.06); background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 头部标题与状态 -->
  <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
    <h3 style="margin: 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 8px;">
      <span style="color: #E4405F; font-size: 22px;">📱</span>
      Instagram 直播
    </h3>
    <span id="ig-live-status" style="padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 500; background: #fafafa; color: #65676b;">
      检测直播状态中...
    </span>
  </div>

  <!-- 直播核心区域（两种模式：直播中显示播放器，未直播显示提示） -->
  <div style="position: relative; width: 100%; border-radius: 8px; overflow: hidden; margin-bottom: 15px;">
    <!-- 1. 直播播放器（直播中显示） -->
    <div id="ig-live-player-container" style="width: 100%; background: #000; display: none;">
      <!-- Instagram直播嵌入iframe（官方兼容格式） -->
      <iframe
        id="ig-live-player"
        src=""
        width="100%"
        height="450"
        style="border: none; display: block;"
        allowfullscreen
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"
        loading="lazy"
      ></iframe>
    </div>

    <!-- 2. 非直播状态提示（未开播/加载失败时显示） -->
    <div id="ig-live-fallback" style="width: 100%; background: #fafafa; padding: 40px 20px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid #f0f0f0;">
      <span style="font-size: 48px; color: #E4405F; margin-bottom: 15px;">📺</span>
      <h4 id="fallback-title" style="margin: 0 0 10px; font-size: 16px; color: #333;">直播暂未开始</h4>
      <p id="fallback-desc" style="margin: 0 0 20px; font-size: 14px; color: #65676b; max-width: 500px;">
        请关注Instagram账号获取最新直播通知，开播后将自动更新
      </p>
      <!-- 前往Instagram按钮 -->
      <a id="ig-direct-link" href="" target="_blank" style="padding: 10px 20px; background: #E4405F; color: #ffffff; border-radius: 4px; text-decoration: none; font-size: 14px; transition: background 0.3s;">
        前往Instagram主页
      </a>
    </div>
  </div>

  <!-- 直播补充信息 -->
  <div style="padding: 15px; border-radius: 8px; background: #fafafa;">
    <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
      <div style="flex: 1; min-width: 250px;">
        <p style="margin: 0; font-size: 14px; color: #65676b;">
          主播账号：<a id="ig-account-link" href="" target="_blank" style="color: #E4405F; text-decoration: none; font-weight: 500;"></a>
        </p>
      </div>
      <div style="font-size: 12px; color: #65676b;">
        提示：Instagram直播仅支持在开播时加载，未开播将显示账号跳转入口
      </div>
    </div>
  </div>
</div>

<script>
  // *************************
  // 你需要修改的核心配置（必改）
  // *************************
  const IG_LIVE_CONFIG = {
    username: "your_instagram_username", // 你的Instagram账号用户名（如"taylor_graham"，不含@）
    liveHighlightId: "17895693822000000", // 可选：直播回放/精彩片段ID（开播时可留空，回放时填写）
    autoPlay: false // 是否自动播放（true=自动，false=点击播放，受浏览器策略限制）
  };

  // DOM元素获取
  const livePlayerContainer = document.getElementById("ig-live-player-container");
  const livePlayer = document.getElementById("ig-live-player");
  const liveFallback = document.getElementById("ig-live-fallback");
  const liveStatus = document.getElementById("ig-live-status");
  const directLink = document.getElementById("ig-direct-link");
  const accountLink = document.getElementById("ig-account-link");
  const fallbackTitle = document.getElementById("fallback-title");
  const fallbackDesc = document.getElementById("fallback-desc");

  // 初始化Instagram直播链接与信息
  function initIgLive() {
    // 1. 设置基础链接（账号主页、备用跳转）
    const accountUrl = `https://www.instagram.com/${IG_LIVE_CONFIG.username}/`;
    directLink.href = accountUrl;
    accountLink.href = accountUrl;
    accountLink.textContent = `@${IG_LIVE_CONFIG.username}`;

    // 2. 拼接直播/回放嵌入链接（Instagram官方嵌入规则）
    let embedUrl = "";
    if (IG_LIVE_CONFIG.liveHighlightId) {
      // 回放/精彩片段模式
      embedUrl = `https://www.instagram.com/p/${IG_LIVE_CONFIG.liveHighlightId}/embed/?autoplay=${IG_LIVE_CONFIG.autoPlay ? 1 : 0}&captioned=0`;
    } else {
      // 实时直播模式（依赖账号开播状态，未开播则显示 fallback）
      embedUrl = `https://www.instagram.com/${IG_LIVE_CONFIG.username}/live/embed/?autoplay=${IG_LIVE_CONFIG.autoPlay ? 1 : 0}`;
    }

    // 3. 加载播放器并检测状态
    livePlayer.src = embedUrl;
    checkLiveStatus(embedUrl);
  }

  // 检测直播状态（加载成功/失败/未开播）
  function checkLiveStatus(embedUrl) {
    // 监听iframe加载完成
    livePlayer.onload = () => {
      // 检查播放器内容是否有效（直播中会有播放控件，未开播则显示"未找到"提示）
      setTimeout(() => {
        try {
          const playerContent = livePlayer.contentDocument.body.innerText;
          if (playerContent.includes("Live") || playerContent.includes("直播") || !playerContent.includes("not found")) {
            // 直播中/回放可用：显示播放器，隐藏 fallback
            livePlayerContainer.style.display = "block";
            liveFallback.style.display = "none";
            liveStatus.textContent = IG_LIVE_CONFIG.liveHighlightId ? "直播回放加载完成" : "正在直播中";
            liveStatus.style.background = "#e8f4ea";
            liveStatus.style.color = "#1a7f40";
          } else {
            // 未开播/链接无效：显示 fallback
            handleFallback("直播暂未开始", "主播当前未开启直播，点击按钮前往Instagram关注最新动态");
          }
        } catch (err) {
          // 跨域访问限制：直接显示 fallback（Instagram 部分嵌入内容有跨域保护）
          handleFallback("直播状态无法检测", "建议前往Instagram账号查看是否正在直播");
        }
      }, 2000);
    };

    // 加载超时处理（10秒未加载成功则显示 fallback）
    setTimeout(() => {
      if (!livePlayerContainer.style.display) {
        handleFallback("直播加载超时", "网络较慢或直播未开播，可前往Instagram直接查看");
      }
    }, 10000);
  }

  // 处理非直播状态（统一更新提示文案和状态）
  function handleFallback(title, desc) {
    fallbackTitle.textContent = title;
    fallbackDesc.textContent = desc;
    liveStatus.textContent = title;
    liveStatus.style.background = "#ffebee";
    liveStatus.style.color = "#d32f2f";
  }

  // 页面加载完成后初始化
  window.addEventListener("DOMContentLoaded", initIgLive);
</script>
<!-- 模块结尾：GitHub博客专用Instagram直播嵌入模块 -->






<!-- 央视直播墙模块 - 可直接粘贴到GitHub博客 -->
<div style="max-width: 1200px; margin: 2rem auto; padding: 0 1rem; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
  <!-- 模块标题 -->
  <h2 style="text-align: center; color: #333; margin-bottom: 1.5rem; font-size: 1.8rem;">央视高清直播墙</h2>

  <!-- 直播网格容器 -->
  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.2rem; align-items: start;">
    <!-- 1. CCTV-1 综合 -->
    <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; transition: box-shadow 0.3s ease;">
      <div style="background: #0056b3; color: #fff; padding: 0.8rem 1rem; font-size: 1.1rem; font-weight: 500;">CCTV-1 综合</div>
      <!-- 视频播放区 -->
      <div style="position: relative; padding-top: 56.25%; background: #000;">
        <video controls autoplay muted style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" preload="metadata">
          <source src="http://ottrrs.hl.chinamobile.com/PLTV/88888888/224/3221225603/index.m3u8" type="application/x-mpegURL">
          你的浏览器不支持HTML5视频播放，请更新浏览器
        </video>
      </div>
      <!-- 节目信息 -->
      <div style="padding: 0.8rem 1rem; border-top: 1px solid #f0f0f0;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <span style="color: #0056b3; font-weight: 500;">当前节目：</span>
          <a href="https://www.tvmao.com/program/CCTV-CCTV1.html" target="_blank" style="color: #0066cc; text-decoration: none; margin-left: 0.3rem;">查看完整节目表</a>
        </p>
      </div>
    </div>

    <!-- 2. CCTV-3 综艺 -->
    <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; transition: box-shadow 0.3s ease;">
      <div style="background: #c21f3a; color: #fff; padding: 0.8rem 1rem; font-size: 1.1rem; font-weight: 500;">CCTV-3 综艺</div>
      <div style="position: relative; padding-top: 56.25%; background: #000;">
        <video controls autoplay muted style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" preload="metadata">
          <source src="http://ottrrs.hl.chinamobile.com/PLTV/88888888/224/3221226328/index.m3u8" type="application/x-mpegURL">
          你的浏览器不支持HTML5视频播放，请更新浏览器
        </video>
      </div>
      <div style="padding: 0.8rem 1rem; border-top: 1px solid #f0f0f0;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <span style="color: #c21f3a; font-weight: 500;">当前节目：</span>
          <a href="https://www.tvmao.com/program/CCTV-CCTV3.html" target="_blank" style="color: #0066cc; text-decoration: none; margin-left: 0.3rem;">查看完整节目表</a>
        </p>
      </div>
    </div>

    <!-- 3. CCTV-6 电影 -->
    <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; transition: box-shadow 0.3s ease;">
      <div style="background: #ff9900; color: #fff; padding: 0.8rem 1rem; font-size: 1.1rem; font-weight: 500;">CCTV-6 电影</div>
      <div style="position: relative; padding-top: 56.25%; background: #000;">
        <video controls autoplay muted style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" preload="metadata">
          <source src="http://ottrrs.hl.chinamobile.com/PLTV/88888888/224/3221226010/index.m3u8" type="application/x-mpegURL">
          你的浏览器不支持HTML5视频播放，请更新浏览器
        </video>
      </div>
      <div style="padding: 0.8rem 1rem; border-top: 1px solid #f0f0f0;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <span style="color: #ff9900; font-weight: 500;">当前节目：</span>
          <a href="https://www.tvmao.com/program/CCTV-CCTV6.html" target="_blank" style="color: #0066cc; text-decoration: none; margin-left: 0.3rem;">查看完整节目表</a>
        </p>
      </div>
    </div>

    <!-- 4. CCTV-8 电视剧 -->
    <div style="background: #009944; color: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; transition: box-shadow 0.3s ease;">
      <div style="padding: 0.8rem 1rem; font-size: 1.1rem; font-weight: 500;">CCTV-8 电视剧</div>
      <div style="position: relative; padding-top: 56.25%; background: #000;">
        <video controls autoplay muted style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" preload="metadata">
          <source src="http://ottrrs.hl.chinamobile.com/PLTV/88888888/224/3221226382/index.m3u8" type="application/x-mpegURL">
          你的浏览器不支持HTML5视频播放，请更新浏览器
        </video>
      </div>
      <div style="padding: 0.8rem 1rem; border-top: 1px solid #f0f0f0; background: #fff;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <span style="color: #009944; font-weight: 500;">当前节目：</span>
          <a href="https://www.tvmao.com/program/CCTV-CCTV8.html" target="_blank" style="color: #0066cc; text-decoration: none; margin-left: 0.3rem;">查看完整节目表</a>
        </p>
      </div>
    </div>

    <!-- 5. CCTV-13 新闻 -->
    <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; transition: box-shadow 0.3s ease;">
      <div style="background: #dd0000; color: #fff; padding: 0.8rem 1rem; font-size: 1.1rem; font-weight: 500;">CCTV-13 新闻</div>
      <div style="position: relative; padding-top: 56.25%; background: #000;">
        <video controls autoplay muted style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;" preload="metadata">
          <source src="http://ottrrs.hl.chinamobile.com/PLTV/88888888/224/3221226414/index.m3u8" type="application/x-mpegURL">
          你的浏览器不支持HTML5视频播放，请更新浏览器
        </video>
      </div>
      <div style="padding: 0.8rem 1rem; border-top: 1px solid #f0f0f0;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <span style="color: #dd0000; font-weight: 500;">当前节目：</span>
          <a href="https://www.tvmao.com/program/CCTV-CCTV13.html" target="_blank" style="color: #0066cc; text-decoration: none; margin-left: 0.3rem;">查看完整节目表</a>
        </p>
      </div>
    </div>
  </div>

  <!-- 模块说明 -->
  <p style="text-align: center; color: #888; font-size: 0.85rem; margin-top: 1.5rem;">
    提示：若直播加载失败，请刷新页面重试；节目表链接跳转至电视猫官网，实时更新节目信息
  </p>
</div>




<!-- 模块开头：GitHub博客专用虎牙直播播放器 -->
<div style="width: 100%; max-width: 1000px; margin: 25px auto; border-radius: 8px; overflow: hidden; box-shadow: 0 3px 12px rgba(0,0,0,0.05); background: #ffffff;">
  <!-- 虎牙直播配置区（直接修改下方ID/链接即可） -->
  <script>
    // 👇 核心配置：填写虎牙直播间ID或完整链接（二选一，ID优先）
    const huyaLiveConfig = {
      liveRoomId: "11342412", // 虎牙直播间数字ID（示例：660000，可从直播间URL获取）
      liveRoomUrl: "" // 虎牙直播间完整链接（示例：https://www.huya.com/660000，若填了ID则此参数无效）
    };

    // 自动生成有效直播链接
    function getValidHuyaUrl() {
      if (huyaLiveConfig.liveRoomId) {
        return `https://www.huya.com/${huyaLiveConfig.liveRoomId}`;
      }
      return huyaLiveConfig.liveRoomUrl || "https://www.huya.com/";
    }
  </script>

  <!-- 加载状态提示 -->
  <div id="huyaLoading" style="text-align: center; padding: 30px; background: #fafafa; color: #666; font-size: 15px;">
    正在加载虎牙直播...
  </div>

  <!-- 直播播放器主体 -->
  <iframe
    id="huyaLivePlayer"
    src=""
    width="100%"
    height="600"
    frameborder="0"
    scrolling="no"
    allowfullscreen="true"
    style="display: none; border: none;"
    title="虎牙直播间播放"
  ></iframe>
</div>

<script>
  // 页面加载完成后初始化播放器
  document.addEventListener("DOMContentLoaded", function() {
    const liveUrl = getValidHuyaUrl();
    const player = document.getElementById("huyaLivePlayer");
    const loadingTip = document.getElementById("huyaLoading");

    // 校验配置有效性
    if (!liveUrl.includes("huya.com")) {
      loadingTip.textContent = "配置错误：请填写有效的虎牙直播间ID或链接！";
      loadingTip.style.color = "#ff4d4f";
      return;
    }

    // 加载直播画面
    player.src = liveUrl;

    // 监听播放器加载状态
    player.onload = function() {
      player.style.display = "block";
      loadingTip.style.display = "none";
    };

    // 加载超时处理（防止一直显示加载中）
    setTimeout(() => {
      if (player.style.display === "none") {
        loadingTip.textContent = "直播加载超时，可能是直播间未开播或网络问题";
        loadingTip.style.color = "#ff7a45";
      }
    }, 10000);
  });
</script>
<!-- 模块结尾：GitHub博客专用虎牙直播播放器 -->




	
<!-- 文章内容 -->
<article>
<h2>YouTube直播</h2>
<p>凤凰卫视实时新闻直播</p>
<div class="video-container">
  <div id="live-player">加载中...</div>
</div>
</article>

<article>
<h2>直播频道</h2>
<!-- 直播频道容器 -->
<div id="live-channel-feed" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;"></div>
</article>

<article>
<h2>音乐分享1</h2>
<p>一人一首经典曲✌︎˶╹ꇴ╹˶✌︎ </p>
<div class="video-container">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/WbW00ghKFt0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
</article>

<article>
<h2>悠哉博文</h2>
<p>这是我的第一篇博客文章，欢迎大家来到我的博客！我会分享生活、技术、旅行和各种有趣的内容。</p>
<!-- 横向展示两张图片 -->
<div class="gallery">
  <img src="https://raw.githubusercontent.com/fuchenyouzai/youzai/main/t2.jpg" alt="图片1">
  <img src="https://raw.githubusercontent.com/fuchenyouzai/youzai/main/t4.jpg" alt="图片2">
</div>
</article>

<article>
  <h2>旅行见闻</h2>
  <p>照片和视频分享</p>
  <div class="article-video">
    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="黄石公园短视频" allowfullscreen></iframe>
  </div>
</article>

<article>
  <h2>音乐分享2</h2>
  <p>这是我最近发现 的一首音乐，大家可以试听。</p>
  <audio controls preload="auto" controlsList="nodownload">
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    您的浏览器不支持音频播放。
  </audio>
</article>

<article>
<h2>悠哉相册</h2>
<div class="gallery">
<img src="https://raw.githubusercontent.com/fuchenyouzai/youzai/main/t2.jpg" alt="图片1">
<img src="https://raw.githubusercontent.com/fuchenyouzai/youzai/main/t4.jpg" alt="图片3">
</div>
</article>

<article>
<h2>悠哉YouTube</h2>
<a href="https://www.youtube.com/@拂尘悠哉" target="_blank" class="telegram-btn">访问 YouTube</a>
<div id="youtube-feed" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; margin-top:10px;"></div>
</article>

<article>
<h2>悠哉留言板1（Gitalk）</h2>
<div id="gitalk-container"></div>
<a href="https://github.com/fuchenyouzai/youzai/issues" target="_blank" class="admin-btn" style="margin-top:10px;">查看 GitHub 后台评论</a>
</article>

<article>
<h2>悠哉留言板2（Disqus 中文）</h2>
<div id="disqus_thread"></div>
<script>
(function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://youzaibolg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
</article>

</main>

<footer>
&copy; 2026 悠哉的博客
</footer>
<!-- 安装按钮 -->
<div id="install-btn">
  安装悠哉博客到设备
</div>

<!-- 右下角按钮 -->
<button id="sound-toggle-btn">🔊 打开声音</button>
<button id="mode-toggle-btn">🌙 夜晚模式</button>

<!-- 新增：左下角全局声音控制按钮（含音量滑块） -->
<div id="global-sound-control" style="position: fixed; bottom: 20px; left: 20px; z-index: 1000; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.5); padding: 8px 12px; border-radius: 8px;">
  <!-- 全局声音开关按钮 -->
  <button id="global-sound-btn" style="padding: 8px 12px; border: none; border-radius: 6px; background-color: #4CAF50; color: white; font-weight: bold; cursor: pointer; transition: background 0.3s;">🔊 全局有声</button>
  <!-- 全局音量滑块 -->
  <div style="display: flex; align-items: center; gap: 5px;">
    <span style="color: white; font-size: 14px;">音量</span>
    <input type="range" id="global-volume-slider" min="0" max="100" value="100" style="width: 100px; accent-color: #4CAF50; cursor: pointer;">
  </div>
</div>

<!-- 原有：右侧音量滑块区域 -->
<div style="position: fixed; bottom: 100px; right: 20px; z-index: 1000; display: flex; align-items: center;">
  <span style="color: white; margin-right: 10px; background-color: rgba(0, 0, 0, 0.5); padding: 3px 6px; border-radius: 4px;">音量</span>
  <input type="range" id="volume-slider" min="0" max="100" value="100" style="width: 100px;">
</div>

<!-- 外部资源引入（保留原结构） -->
<!-- Gitalk -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

<!-- YouTube IFrame API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
// 直播频道数组，每个元素是一个直播的 ID 和标题
const liveChannels = [
  {id: "fN9uYWCjQaw", title: "凤凰卫视直播"},
  {id: "ZB9QSD_SWmM", title: "科技新闻直播"},
  {id: "WbW00ghKFt0", title: "娱乐直播"}
];

// 获取直播频道展示容器
const liveChannelFeed = document.getElementById("live-channel-feed");

// 动态生成每个频道的直播播放器
liveChannels.forEach(channel => {
  const channelWrapper = document.createElement("div");
  channelWrapper.style.display = "flex";
  channelWrapper.style.flexDirection = "column";
  channelWrapper.style.gap = "5px";

  // 创建 iframe 容器
  const iframeWrapper = document.createElement("div");
  iframeWrapper.style.position = "relative";
  iframeWrapper.style.width = "100%";
  iframeWrapper.style.height = 0;
  iframeWrapper.style.overflow = "hidden";
  iframeWrapper.style.borderRadius = "5px";
  iframeWrapper.style.paddingBottom = "56.25%"; // 16:9比例
  
  // 新增：为iframe添加enablejsapi=1，支持YouTube API控制
  iframeWrapper.innerHTML = `<iframe src="https://www.youtube.com/embed/${channel.id}?enablejsapi=1" 
                              style="position:absolute;top:0;left:0;width:100%;height:100%;border:none;"
                              title="${channel.title}" 
                              allowfullscreen
                              id="live-iframe-${channel.id}"></iframe>`;

  // 创建频道信息
  const channelInfo = document.createElement("div");
  channelInfo.style.display = "flex";
  channelInfo.style.flexDirection = "column";
  channelInfo.style.alignItems = "center";
  channelInfo.style.gap = "5px";

  const titleElement = document.createElement("p");
  titleElement.textContent = channel.title;
  titleElement.style.textAlign = "center";
  titleElement.style.margin = "0";
  titleElement.style.fontWeight = "bold";
  titleElement.style.fontSize = "14px";

  channelInfo.appendChild(titleElement);

  // 将生成的 iframe 和频道信息加入页面
  channelWrapper.appendChild(iframeWrapper);
  channelWrapper.appendChild(channelInfo);
  liveChannelFeed.appendChild(channelWrapper);

  // 新增：监听iframe加载，获取播放器实例并加入全局控制
  const iframe = document.getElementById(`live-iframe-${channel.id}`);
  iframe.onload = () => {
    setTimeout(() => {
      const player = new YT.Player(`live-iframe-${channel.id}`, {
        events: {
          'onReady': (event) => {
            // 初始化全局播放器数组（若未存在）
            if (!window.globalYoutubePlayers) window.globalYoutubePlayers = [];
            // 将播放器实例加入全局列表
            if (!window.globalYoutubePlayers.includes(event.target)) {
              window.globalYoutubePlayers.push(event.target);
            }
            // 同步初始状态（静音+音量）
            event.target.mute();
            const globalSlider = document.getElementById('global-volume-slider');
            if (globalSlider) event.target.setVolume(globalSlider.value);
          }
        }
      });
    }, 500);
  };
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // 新增：1. 收集所有画廊图片 & 初始化当前索引
  const galleryImages = Array.from(document.querySelectorAll('.gallery img'));
  let currentImageIndex = 0;

  // 新增：2. 图片切换核心函数（更新放大层图片）
  function updateOverlayImage(index) {
    const overlayImg = document.querySelector('.image-overlay img');
    if (overlayImg && galleryImages[index]) {
      overlayImg.src = galleryImages[index].src;
      overlayImg.alt = galleryImages[index].alt || `图片${index + 1}`;
    }
    currentImageIndex = index; // 更新当前索引
  }

  // 新增：3. 上一张/下一张切换函数（支持循环）
  function showPrevImage() {
    let newIndex = currentImageIndex - 1;
    newIndex = newIndex < 0 ? galleryImages.length - 1 : newIndex; // 循环到最后一张
    updateOverlayImage(newIndex);
  }
  function showNextImage() {
    let newIndex = currentImageIndex + 1;
    newIndex = newIndex >= galleryImages.length ? 0 : newIndex; // 循环到第一张
    updateOverlayImage(newIndex);
  }

  // 原有：全局声音控制初始化（保留）
  window.globalAudioElements = Array.from(document.querySelectorAll('audio'));
  window.isGlobalSoundOn = false;
  const globalSoundBtn = document.getElementById('global-sound-btn');
  const globalVolumeSlider = document.getElementById('global-volume-slider');

  window.globalAudioElements.forEach(audio => {
    audio.muted = !window.isGlobalSoundOn;
    audio.volume = globalVolumeSlider.value / 100;
  });

  // 原有：Gitalk 初始化（保留）
  const gitalk = new Gitalk({
    clientID: 'Ov23lijfU0G3M7jiMFAW',
    clientSecret: '47120dd1810d3a2a9aa0033211f5ee73ef29baa3',
    repo: 'youzai',
    owner: 'fuchenyouzai',
    admin: ['fuchenyouzai'],
    id: location.pathname,
    distractionFreeMode: false,
    language: 'zh-CN'
  });
  gitalk.render('gitalk-container');
  
  // 原有：音量滑块同步逻辑（保留）
  const volumeSlider = document.getElementById('volume-slider');
  volumeSlider.addEventListener('input', (event) => {
    const volume = event.target.value;
    if (window.livePlayer) window.livePlayer.setVolume(volume);
    if (globalVolumeSlider) globalVolumeSlider.value = volume;
    if (window.syncGlobalVolume) window.syncGlobalVolume(volume);
  });

  // 重写：4. 图片点击放大逻辑（替换原逻辑，支持滑动+按钮）
  galleryImages.forEach((img, index) => {
    img.addEventListener('click', () => {
      currentImageIndex = index; // 记录当前点击图片索引

      // 创建放大层容器（带类名方便样式控制）
      const overlay = document.createElement('div');
      overlay.className = 'image-overlay';
      overlay.style.position = 'fixed';
      overlay.style.top = 0;
      overlay.style.left = 0;
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.background = 'rgba(0,0,0,0.9)';
      overlay.style.display = 'flex';
      overlay.style.flexDirection = 'column';
      overlay.style.justifyContent = 'center';
      overlay.style.alignItems = 'center';
      overlay.style.cursor = 'default';
      overlay.style.zIndex = '9999';
      overlay.style.padding = '20px';
      overlay.style.boxSizing = 'border-box';

      // 新增：上一张按钮
      const prevBtn = document.createElement('button');
      prevBtn.textContent = '← 上一张';
      prevBtn.style.position = 'absolute';
      prevBtn.style.left = '20px';
      prevBtn.style.padding = '10px 15px';
      prevBtn.style.backgroundColor = 'rgba(255,255,255,0.2)';
      prevBtn.style.color = 'white';
      prevBtn.style.border = 'none';
      prevBtn.style.borderRadius = '5px';
      prevBtn.style.fontSize = '16px';
      prevBtn.style.cursor = 'pointer';
      prevBtn.style.zIndex = '10';
      prevBtn.style.transition = 'background 0.3s';
      prevBtn.addEventListener('mouseover', () => prevBtn.style.backgroundColor = 'rgba(255,255,255,0.4)');
      prevBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // 阻止关闭放大层
        showPrevImage();
      });

      // 新增：下一张按钮
      const nextBtn = document.createElement('button');
      nextBtn.textContent = '下一张 →';
      nextBtn.style.position = 'absolute';
      nextBtn.style.right = '20px';
      nextBtn.style.padding = '10px 15px';
      nextBtn.style.backgroundColor = 'rgba(255,255,255,0.2)';
      nextBtn.style.color = 'white';
      nextBtn.style.border = 'none';
      nextBtn.style.borderRadius = '5px';
      nextBtn.style.fontSize = '16px';
      nextBtn.style.cursor = 'pointer';
      nextBtn.style.zIndex = '10';
      nextBtn.style.transition = 'background 0.3s';
      nextBtn.addEventListener('mouseover', () => nextBtn.style.backgroundColor = 'rgba(255,255,255,0.4)');
      nextBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // 阻止关闭放大层
        showNextImage();
      });
      // 新增：关闭按钮
      const closeBtn = document.createElement('button');
      closeBtn.textContent = '× 关闭';
      closeBtn.style.position = 'absolute';
      closeBtn.style.top = '20px';
      closeBtn.style.padding = '8px 12px';
      closeBtn.style.backgroundColor = 'rgba(255,0,0,0.6)';
      closeBtn.style.color = 'white';
      closeBtn.style.border = 'none';
      closeBtn.style.borderRadius = '5px';
      closeBtn.style.fontSize = '16px';
      closeBtn.style.cursor = 'pointer';
      closeBtn.style.zIndex = '10';
      closeBtn.style.transition = 'background 0.3s';
      closeBtn.addEventListener('mouseover', () => closeBtn.style.backgroundColor = 'rgba(255,0,0,0.8)');
      closeBtn.addEventListener('click', () => {
        document.body.removeChild(overlay);
        document.removeEventListener('keydown', handleKeyDown); // 移除键盘监听
      });

      // 放大图片元素
      const overlayImg = document.createElement('img');
      overlayImg.src = img.src;
      overlayImg.alt = img.alt || `图片${index + 1}`;
      overlayImg.style.maxWidth = '90%';
      overlayImg.style.maxHeight = '80%';
      overlayImg.style.borderRadius = '5px';
      overlayImg.style.objectFit = 'contain'; // 保证图片不拉伸

      // 组装放大层
      overlay.appendChild(prevBtn);
      overlay.appendChild(nextBtn);
      overlay.appendChild(closeBtn);
      overlay.appendChild(overlayImg);

      // 点击空白处关闭
      overlay.addEventListener('click', () => {
        document.body.removeChild(overlay);
        document.removeEventListener('keydown', handleKeyDown);
      });

      // 新增：移动端触摸滑动支持
      let startX = 0;
      overlay.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX; // 记录触摸起始位置
      });
      overlay.addEventListener('touchend', (e) => {
        if (!e.changedTouches[0]) return;
        const endX = e.changedTouches[0].clientX;
        const diffX = endX - startX; // 计算滑动距离
        if (diffX > 50) showPrevImage(); // 右滑→上一张
        if (diffX < -50) showNextImage(); // 左滑→下一张
      });

      // 新增：PC端键盘方向键控制
      function handleKeyDown(e) {
        if (e.key === 'ArrowLeft') showPrevImage(); // 左箭头→上一张
        if (e.key === 'ArrowRight') showNextImage(); // 右箭头→下一张
        if (e.key === 'Escape') { // ESC键→关闭
          document.body.removeChild(overlay);
          document.removeEventListener('keydown', handleKeyDown);
        }
      }
      document.addEventListener('keydown', handleKeyDown);

      // 加入页面
      document.body.appendChild(overlay);
    });
  });

  // 原有：YouTube视频墙逻辑（保留，无修改）
  const videos = [
    {id: "ZB9QSD_SWmM", type: "shorts", title: "最新 Shorts 视频"},
    {id: "ZB9QSD_SWmM", type: "shorts", title: "示例视频 1"},
    {id: "ZB9QSD_SWmM", type: "shorts", title: "示例视频 2"},
    {id: "ZB9QSD_SWmM", type: "video", title: "示例视频 2"},
    {id: "ZB9QSD_SWmM", type: "video", title: "示例视频 2"},
    {id: "ZB9QSD_SWmM", type: "video", title: "示例视频 2"}
  ];
  const feedContainer = document.getElementById("youtube-feed");
  if (feedContainer) {
    videos.forEach((v, index) => {
      const wrapper = document.createElement("div");
      wrapper.style.display = "flex";
      wrapper.style.flexDirection = "column";
      wrapper.style.gap = "5px";

      const iframeWrapper = document.createElement("div");
      iframeWrapper.style.position = "relative";
      iframeWrapper.style.width = "100%";
      iframeWrapper.style.height = 0;
      iframeWrapper.style.overflow = "hidden";
      iframeWrapper.style.borderRadius = "5px";
      iframeWrapper.style.paddingBottom = v.type === "shorts" ? "177.78%" : "56.25%";
      const iframeId = `video-iframe-${index}`;
      iframeWrapper.innerHTML = `<iframe src="https://www.youtube.com/embed/${v.id}?enablejsapi=1" 
              style="position:absolute;top:0;left:0;width:100%;height:100%;border:none;"
              title="${v.title}" 
              allowfullscreen
              id="${iframeId}"></iframe>`;

      const infoDiv = document.createElement("div");
      infoDiv.style.display = "flex";
      infoDiv.style.flexDirection = "column";
      infoDiv.style.alignItems = "center";
      infoDiv.style.gap = "5px";

      const titleEl = document.createElement("p");
      titleEl.textContent = v.title;
      titleEl.style.textAlign = "center";
      titleEl.style.margin = "0";
      titleEl.style.fontWeight = "bold";
      titleEl.style.fontSize = "14px";

      const btn = document.createElement("a");
      btn.href = `https://www.youtube.com/watch?v=${v.id}`;
      btn.target = "_blank";
      btn.textContent = "在 YouTube 上观看";
      btn.style.display = "inline-block";
      btn.style.padding = "5px 10px";
      btn.style.backgroundColor = "#ff0000";
      btn.style.color = "#fff";
      btn.style.borderRadius = "4px";
      btn.style.fontSize = "12px";
      btn.style.textDecoration = "none";

      infoDiv.appendChild(titleEl);
      infoDiv.appendChild(btn);
      wrapper.appendChild(iframeWrapper);
      wrapper.appendChild(infoDiv);
      feedContainer.appendChild(wrapper);

      const videoIframe = document.getElementById(iframeId);
      videoIframe.onload = () => {
        setTimeout(() => {
          const player = new YT.Player(iframeId, {
            events: {
              'onReady': (event) => {
                if (!window.globalYoutubePlayers) window.globalYoutubePlayers = [];
                if (!window.globalYoutubePlayers.includes(event.target)) {
                  window.globalYoutubePlayers.push(event.target);
                }
                event.target.mute();
                if (globalVolumeSlider) event.target.setVolume(globalVolumeSlider.value);
              }
            }
          });
        }, 500);
      };
    });
  }
  // 原有：PWA Service Worker 注册（保留）
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => console.log('Service Worker 注册成功:', registration.scope))
      .catch(err => console.log('Service Worker 注册失败:', err));
  }

  // 原有：全局音量同步函数（保留）
  window.syncGlobalVolume = function(volume) {
    if (window.globalAudioElements) {
      window.globalAudioElements.forEach(audio => {
        if (audio) audio.volume = volume / 100;
      });
    }
    if (window.globalYoutubePlayers) {
      window.globalYoutubePlayers.forEach(player => {
        if (player && typeof player.setVolume === 'function') {
          player.setVolume(volume);
        }
      });
    }
    if (window.livePlayer) {
      window.livePlayer.setVolume(volume);
    }
  };

  // 原有：全局声音开关函数（保留）
  window.toggleGlobalSound = function() {
    window.isGlobalSoundOn = !window.isGlobalSoundOn;
    if (globalSoundBtn) {
      globalSoundBtn.textContent = window.isGlobalSoundOn ? '🔇 全局静音' : '🔊 全局有声';
    }
    if (window.globalAudioElements) {
      window.globalAudioElements.forEach(audio => {
        if (audio) audio.muted = !window.isGlobalSoundOn;
      });
    }
    if (window.globalYoutubePlayers) {
      window.globalYoutubePlayers.forEach(player => {
        if (player && typeof player.mute === 'function' && typeof player.unMute === 'function') {
          window.isGlobalSoundOn ? player.unMute() : player.mute();
        }
      });
    }
    if (window.livePlayer) {
      window.isGlobalSoundOn ? window.livePlayer.unMute() : window.livePlayer.mute();
    }
    const originalSoundBtn = document.getElementById('sound-toggle-btn');
    if (originalSoundBtn) {
      const originalIsOn = originalSoundBtn.textContent.includes('关闭');
      if (originalIsOn !== window.isGlobalSoundOn) {
        originalSoundBtn.click();
      }
    }
  };

  // 原有：PWA安装按钮逻辑（保留）
  const installBtn = document.getElementById('install-btn');
  let deferredPrompt;
  const isEdge = /Edg/i.test(navigator.userAgent);
  const isChrome = /Chrome/i.test(navigator.userAgent) && !isEdge;

  if (isChrome) {
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });
  }

  installBtn.addEventListener('click', async () => {
    if (isChrome) {
      if (!deferredPrompt) { alert("PWA 安装条件未满足，或已安装"); return; }
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
    } else if (isEdge) {
      alert("请通过浏览器菜单选择“点添加到手机或点安装或点创建快捷方式”来安装到手机或电脑或平板中使用。");
    } else {
      alert("当前浏览器不支持自动安装，请使用 Chrome 或 Edge 浏览器。");
    }
  });

  // 原有：绑定全局控制按钮事件（保留）
  if (globalSoundBtn) {
    globalSoundBtn.addEventListener('click', window.toggleGlobalSound);
  }
  if (globalVolumeSlider) {
    globalVolumeSlider.addEventListener('input', (e) => {
      const volume = e.target.value;
      window.syncGlobalVolume(volume);
    });
  }

}); // DOMContentLoaded 结束
</script>
<script>
// 原有：YouTube Player API 初始化相关变量（新增全局挂载）
window.livePlayer;
window.soundOn = false;

// 原有：onYouTubeIframeAPIReady函数（新增主播放器加入全局控制）
function onYouTubeIframeAPIReady() {
  const latestLiveID = 'fN9uYWCjQaw';
  window.livePlayer = new YT.Player('live-player', {
    videoId: latestLiveID,
    playerVars: { autoplay: 1, mute: 1, controls: 1, modestbranding: 1 },
    events: { 
      'onReady': (event) => { 
        event.target.mute(); 
        // 新增：将主直播播放器加入全局列表
        if (!window.globalYoutubePlayers) window.globalYoutubePlayers = [];
        if (!window.globalYoutubePlayers.includes(event.target)) {
          window.globalYoutubePlayers.push(event.target);
        }
        // 同步全局音量
        const globalSlider = document.getElementById('global-volume-slider');
        if (globalSlider) event.target.setVolume(globalSlider.value);
      } 
    }
  });
}

// 原有：右下角声音开关按钮（保留原逻辑，与全局控制联动）
const soundBtn = document.getElementById('sound-toggle-btn');
soundBtn.addEventListener('click', () => {
  if (!window.livePlayer) return;
  window.soundOn = !window.soundOn;
  // 更新原有按钮文字
  soundBtn.textContent = window.soundOn ? '🔇 关闭声音' : '🔊 打开声音';
  // 同步主直播播放器
  window.soundOn ? window.livePlayer.unMute() : window.livePlayer.mute();
  // 同步全局状态与其他音频/视频
  if (window.isGlobalSoundOn !== window.soundOn) {
    window.isGlobalSoundOn = window.soundOn;
    const globalSoundBtn = document.getElementById('global-sound-btn');
    if (globalSoundBtn) {
      globalSoundBtn.textContent = window.soundOn ? '🔇 全局静音' : '🔊 全局有声';
    }
    // 同步原生音频与其他YouTube播放器
    if (window.globalAudioElements) {
      window.globalAudioElements.forEach(audio => {
        if (audio) audio.muted = !window.soundOn;
      });
    }
    if (window.globalYoutubePlayers) {
      window.globalYoutubePlayers.forEach(player => {
        if (player !== window.livePlayer && player && typeof player.mute === 'function' && typeof player.unMute === 'function') {
          window.soundOn ? player.unMute() : player.mute();
        }
      });
    }
  }
});

// 原有：白天/夜晚模式切换按钮（保留原逻辑，无修改）
const modeBtn = document.getElementById('mode-toggle-btn');
const currentMode = localStorage.getItem('theme') || 'light'; // 默认使用 'light' 模式
if (currentMode === 'dark') {
  document.body.classList.add('dark-mode');
  modeBtn.textContent = "☀️ 白天模式";
} else {
  document.body.classList.remove('dark-mode');
  modeBtn.textContent = "🌙 夜晚模式";
}

modeBtn.addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
  if (document.body.classList.contains('dark-mode')) {
    modeBtn.textContent = "☀️ 白天模式";
    localStorage.setItem('theme', 'dark'); // 保存夜间模式
  } else {
    modeBtn.textContent = "🌙 夜晚模式";
    localStorage.setItem('theme', 'light'); // 保存白天模式
  }
});
</script>
</body>
</html>
